define("layout/util/skinAnchorsMetaData",["lodash"],function(a){"use strict";function c(c,d){return a.isFunction(b[c])?b[c](d):b[c]||0}var b={"wysiwyg.viewer.skins.area.BubbleArea":30,"wysiwyg.viewer.skins.area.BubbleLeftArea":30,"wysiwyg.viewer.skins.area.RibbonAreaSkin":function(b){var c=a.get(b,"style.properties"),d=10;return c&&(d+=parseInt(c.els,10)||0),d},"wysiwyg.viewer.skins.area.SloopyArea":6,"wysiwyg.viewer.skins.area.BubbleAreaLeft":10,"wysiwyg.viewer.skins.area.LeftTriangleArea":5,"wysiwyg.viewer.skins.area.RightTriangleArea":5,"wysiwyg.viewer.skins.area.BubbleAreaRight":10,"wysiwyg.viewer.skins.page.SloopyPageSkin":3,"wysiwyg.viewer.skins.page.BasicPageSkin":20,"wysiwyg.viewer.skins.page.LiftedBottomPageSkin":20,"wysiwyg.viewer.skins.page.LiftedTopPageSkin":20,"wysiwyg.viewer.skins.page.BorderPageSkin":20,"wysiwyg.viewer.skins.page.LiftedShadowPageSkin":20,"wysiwyg.viewer.skins.page.ShinyIPageSkin":20};return{getNonAnchorableHeightForSkin:c}}),define("layout/util/anchorsGenerator",["lodash","utils","layout/util/skinAnchorsMetaData"],function(a,b,c){"use strict";function m(a,c){var d=b.boundingLayout.getBoundingY(c),e=d+b.boundingLayout.getBoundingHeight(c),f=b.boundingLayout.getBoundingY(a),g=b.boundingLayout.getBoundingHeight(a),h=f+g,i=f+g/2;return e>h&&d>i}function n(c,d,e){var f=c.layout,g=d.layout,h=b.boundingLayout.getBoundingY(g),i=h-b.boundingLayout.getBoundingY(f)-b.boundingLayout.getBoundingHeight(f);a.isFinite(e)&&(i=Math.max(i,e)),r(k.bottomTop,c.id,d.id,i,h)}function o(a,c){var d=a.layout,e=c.layout,f=b.boundingLayout.getBoundingY(e)-b.boundingLayout.getBoundingY(d);r(k.topTop,a.id,c.id,f,b.boundingLayout.getBoundingY(e))}function p(d,e){if("SITE_STRUCTURE"===e.id)return r(k.bottomParent,d.id,e.id,0,0);var f,i=e.layout,l=e.styleId&&e.styleId.replace("#",""),m=j[l],n=m&&m.skin||e.skin,o=d.layout,p=b.boundingLayout.getBoundingY(o),q=b.boundingLayout.getBoundingHeight(o),s=i.height-c.getNonAnchorableHeightForSkin(n,m),t=a.includes(g,e.type)||a.includes(h,e.componentType),u=s;return f=t?0:s-(p+q),r(k.bottomParent,d.id,e.id,f,u)}function q(a,b,c,d){return{distance:0,locked:!0,originalValue:d,fromComp:b,targetComponent:c,type:a}}function r(a,b,c,d,e){var f=q(a,b,c,e);f.distance=d,f.locked=s(d);var g=i[b];g.push(f)}function s(a){return d>=a}function t(c){return!(a.includes(e,c.id)||c.layout.fixedPosition||b.layout.isVerticallyDocked(c.layout))}function u(c,d){i={};var e=b.dataUtils.getChildrenData(c,d),g="SITE_STRUCTURE"===c.id;if(!e)return i;var q,h={},j=[],k=[];return a.forEach(e,function(b){a.includes(f,b.id)?j.push(b):t(b)&&k.push(b),h[b.id]=b,i[b.id]=[]}),e=null,B(c,j),k.length?(q=g?v(j,k,h):x(k,h),a.forEach(q,function(b,d){if(b.length){var e=h[d],f=e.layout;a.forEach(b,function(a){if(a===l)return void p(e,c);var b=h[a],d=m(f,b.layout);d?n(e,b):o(e,b)})}}),i):i}function v(b,c,d){var e=a.find(b,{id:"SITE_HEADER"});c.push({id:"SITE_HEADER",layout:a.assign({},e.layout,{y:-5e3,x:-1e5,width:1/0})});var f=x(c,d);return f.SITE_HEADER=a.without(f.SITE_HEADER,l),f}function w(b,c){var d=[];a.forEach(b,function(b,e){var f=a(c[e]).filter({type:k.bottomTop}).map("source").value();d=d.concat(f)}),a.forEach(d,function(a){delete b[a]})}function x(b,c){var d={},e={},f=a.sortBy(b,"layout.y"),g={left:-1e5,right:1/0,ids:["root"]};f=y(f),d.root=[];var i,j,l,m,h=[g];return a.forEach(f,function(b){d[b.id]=[],e[b.id]=[],i=b.layout.x,j=i+b.layout.width,l=null,m=0;var p,q,r,f=h.length,g=[],n={},o=[];for(r=0;f>r;r++){var s=h[r];if(s.right<=i)g.push(s);else if(null===l?(l=r,p=!0):p=!1,(h.length-1===r||h[r+1].left>j)&&(m=r,q=!0),a.forEach(s.ids,function(a){"root"===a?n[a]=k.bottomTop:n[a]=z(c[a],b)}),o=A(o,s,n,p,q,i,j,b.id),q)break}delete n.root,w(n,e),a.forEach(n,function(a,c){d[c].push(b.id),e[b.id].push({source:c,type:a})});var t=a.takeRight(h,f-m-1);h=a.compact(g).concat(o,t)}),delete d.root,d}function y(a){var b={layout:{x:-1e5,y:1/0,height:10,width:1/0},id:l};return a.concat(b)}function z(a,b){var c=m(a.layout,b.layout);return c?k.bottomTop:k.topTop}function A(b,c,d,e,f,g,h,i){var j=a.clone(b);e&&j.push({ids:c.ids,left:c.left,right:g-1});var l={ids:[i],left:Math.max(g,c.left),right:Math.min(h,c.right)};a.forEach(c.ids,function(a){d[a]===k.topTop&&l.ids.push(a)});var m=a.last(j);return m&&!a.isEqual(m.ids,l.ids)?j.push(l):m&&(m.right=l.right),f&&j.push({ids:c.ids,left:h+1,right:c.right}),j}function B(b,c){if("Document"===b.type&&c&&c.length){var d=a.find(c,{id:"SITE_HEADER"}),e=a.find(c,{id:"PAGES_CONTAINER"}),f=a.find(c,{id:"SITE_FOOTER"});if(d&&e&&n(d,e,0),e&&f&&n(e,f,0),f){var g=0;r(k.bottomParent,f.id,b.id,0,g)}}}function C(c,d,e){for(var g,h,i,f=[c],j={};f.length;)g=f.pop(),i=D(g,d,e),a.assign(j,i),h=b.dataUtils.getChildrenData(g,e),Array.prototype.push.apply(f,h);return j}function D(a,b,c){return j=b,u(a,c)}function E(b,c,d,e,f){var g=!1,h=e-d;return 0>h?!1:(a.forEach(b,function(b){if(b.locked&&(b.type===k.bottomTop||b.type===k.bottomParent)){var d=a.get(f,[b.type,b.targetComponent]),e=d+h;b.distance!==e&&(g=!0,b.distance=e,b.originalValue=c+e,b.locked=s(e))}}),g)}var i,j,d=70,e=["BACK_TO_TOP_BUTTON"],f=["SITE_HEADER","SITE_FOOTER","PAGES_CONTAINER"],g=["Page","Document"],h=["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"],k={bottomTop:"BOTTOM_TOP",bottomParent:"BOTTOM_PARENT",topTop:"TOP_TOP"},l="parentNode";return{createPageAnchors:C,createChildrenAnchors:D,packTextAnchors:E}}),define("layout/util/dataPreparationsForAnchors",["utils","lodash","layout/util/anchorsGenerator"],function(a,b){"use strict";function e(){return{flat:{},sortingY:{},minHeight:{},toBottomDistance:{},ignoreOriginalValue:{},noHeightChange:{},containerHeightMargin:{},currentHeight:{},currentY:{},heightDiff:{},topDiff:{},locked:{},valueForFirstLockedAnchor:{}}}function f(a,b){var c=a.id;a.layout&&a.layout.rotationInDegrees&&(b.noHeightChange[c]=!0),"Page"===a.type?b.toBottomDistance[c]=0:"Document"!==a.type&&"wysiwyg.viewer.components.PagesContainer"!==a.componentType||(b.ignoreOriginalValue[c]=!0)}function g(b,c,d){return a.boundingLayout.getBoundingHeight({height:b,width:c,rotationInDegrees:d})}function h(b,c,d,e){return a.boundingLayout.getBoundingY({y:b,height:c,width:d,rotationInDegrees:e})}function i(a,b,c){var d=a.id,e=a.layout?a.layout.rotationInDegrees:0,f=c.height[d],i=c.top&&void 0!==c.top[d]?c.top[d]:a.layout&&a.layout.y||0;b.currentHeight[a.id]=e?g(f,c.width[d],e):f,b.heightDiff[d]=b.currentHeight[a.id]-f,b.currentY[d]=e?h(i,f,c.width[d],e):i,b.topDiff[d]=i-b.currentY[d]}function j(c,d,e,g,h,l){if(b.has(e.height,c.id)){f(c,d),i(c,d,e),d.minHeight[c.id]=k(c,d),d.currentHeight[c.id]=Math.max(d.currentHeight[c.id],d.minHeight[c.id]),d.flat[c.id]=c;var m=d.currentY[c.id],n=g+m-h,o=d.currentHeight[c.id];d.sortingY[c.id]=n,d.valueForFirstLockedAnchor[c.id]={pusherId:null,value:-Number.MAX_VALUE};var p=a.dataUtils.getChildrenData(c,l);b.forEach(p,function(a){j(a,d,e,n,o||5e3,l)})}}function k(a,b){var c=a.id;return c&&!l(c)?Math.max(b.minHeight[c]||0,d):b.minHeight[c]||0}function l(a){return a&&b.includes(c,a)}function m(a,b,c,d){j(a,b,c,0,0,d)}function n(a,b,c){return{distance:c,type:a,targetComponent:b,locked:!0,notEnforcingMinValue:!0}}function o(a,c,d,e){var f=a;a.$cloned||(f=b.clone(f),f.layout=b.clone(f.layout),f.layout.anchors=b.clone(f.layout.anchors),f.$cloned=!0);var g=f.layout.anchors;return g.push(n("TOP_TOP",c,d),n("BOTTOM_BOTTOM",c,e)),f}function p(a){b.forEach(a,function(c,d){if(c.layout&&c.layout.anchors){var e=b.filter(c.layout.anchors,{type:"LOCK_BOTTOM"});b.isEmpty(e)||(b.forEach(e,function(b){a[d]=o(a[d],b.targetComponent,b.topToTop,b.distance),a[b.targetComponent]=o(a[b.targetComponent],d,-1*b.topToTop,-1*b.distance)}),b.remove(a[d].layout.anchors,{type:"LOCK_BOTTOM"}))}})}function q(a,c,d){var f=e();f.containerHeightMargin=c.containerHeightMargin||{},f.minHeight=c.minHeight||{},f.injectedAnchors=c.injectedAnchors||{},m(a,f,c,d),p(f.flat);var g=b.sortBy(b.keys(f.flat),function(a){return f.sortingY[a]});return delete f.sortingY,{structureData:f,sortedIds:g}}function r(a,c){b.forEach(c.flat,function(b,d){a.height[d]=c.currentHeight[d]-c.heightDiff[d],a.top[d]=c.currentY[d]+c.topDiff[d]})}function s(c,d,e,f){if(!b.has(c.height,f.id))return 0;d=d||0,d+=c.top[f.id];var g=a.dataUtils.getChildrenData(f,e);return g=b.reject(g,{layout:{fixedPosition:!0}}),Math.max(d+c.height[f.id],Math.max.apply(null,b.map(g,b.partial(s,c,d,e))))}var c=["WIX_ADS"],d=5;return{getDataForAnchorsAndSort:q,fixMeasureMap:r,maxMeasureMapHeight:s}}),define("layout/util/anchors",["lodash","layout/util/dataPreparationsForAnchors","experiment"],function(a,b,c){"use strict";function l(a,b,c,d){return b!==c&&(d[a]=!0),d[a]}function m(b,c,d,e){var f=d[e.targetComponent],g=d[c];e.notEnforcingMinValue&&!a.isEmpty(g)&&(e.notEnforcingMinValue=!1),f[c]=b;var h=Math.max.apply(null,a.values(f));return e.notEnforcingMinValue&&delete f[c],h}function n(a,b,c,d,e){var f=a.targetComponent,g=b.valueForFirstLockedAnchor[f];g&&(a.locked?(g.pusherId&&(c[f]={},c[f][g.pusherId]=g.value),delete b.valueForFirstLockedAnchor[f]):(g.pusherId=d,g.value=Math.max(e,g.value)))}function o(a){return a%1}function p(a,b){var c=b-a;return b-=o(c)}function q(b,c){return a.has(b.currentHeight,c)}function r(b,c,d,e){var f=c;return a.isNumber(e.toBottomDistance[d])?f+=e.toBottomDistance[d]:b.locked?f+=b.distance:(f+=h,e.ignoreOriginalValue[d]||(f=Math.max(f,b.originalValue))),f}function s(b,c,d,e){var f=b;return a.isNumber(e.minHeight[c])&&b<e.minHeight[c]&&(f=e.minHeight[c],d.notEnforcingMinValue&&(d.notEnforcingMinValue=!1,e.dirty[c]=!0)),f}function t(b,d,e){if(a.has(e.injectedAnchors,b))return e.injectedAnchors[b];if(d&&c.isOpen("viewerGeneratedAnchors"))return d[b]||[];var f=e.flat[b],g=f.layout?f.layout.anchors:[];return g}function u(b,c,d,e,f,g){function i(b){var i=t(b,e,d),l=Number.MAX_VALUE;return!d.dirty[b]||f&&!j[b]||a.forEach(i,function(a){if(k[a.type]&&d.flat[a.targetComponent]&&(!f||j[a.targetComponent])){a.targetComponent===g&&(h=!0);var e=k[a.type](b,a,d)?c[a.targetComponent]:Number.MAX_VALUE;l=Math.min(e,l)}}),d.dirty[b]=!1,l}for(var h=!1,l=b.length,m=0;l>m;){var n=i(b[m]);m=Math.min(m+1,n)}return h}function v(c,d,e,f,g,h){var j=b.getDataForAnchorsAndSort(c,d,f),k=j.structureData,l=j.sortedIds,m=a.invert(l),n=e&&e[c.id];k.dirty={},k.toTopAnchorsY={},k.toBottomAnchorsHeight={},k.locked={},a.forEach(h,function(a){k.locked[a]=!0}),a.forEach(k.flat,function(a,b){k.dirty[b]=!0,k.toTopAnchorsY[b]={},k.toBottomAnchorsHeight[b]={}});var o=u(l,m,k,n,g,c.id);return b.fixMeasureMap(d,k),!o&&a.includes(i,c.type)&&(d.height[c.id]=b.maxMeasureMapHeight(d,0,f,c)),k.flat}var d="TOP_TOP",e="BOTTOM_TOP",f="BOTTOM_BOTTOM",g="BOTTOM_PARENT",h=10,i=["Page","Document"],j={SITE_FOOTER:!0,SITE_HEADER:!0,SITE_PAGES:!0,PAGES_CONTAINER:!0,SITE_STRUCTURE:!0,SITE_BACKGROUND:!0},k={};return k[d]=function(b,c,d){var e=c.targetComponent;if(!q(d,e)||!q(d,b))return!1;if(a.has(d.locked,e))return!1;var f=d.currentY[e],g=d.currentY[b]+c.distance;return n(c,d,d.toTopAnchorsY,b,null),g=m(g,b,d.toTopAnchorsY,c),g=p(f,g),d.currentY[e]=g,l(e,f,g,d.dirty)},k[e]=function(b,c,d){var e=c.targetComponent;if(!q(d,e)||!q(d,b))return!1;if(a.has(d.locked,e))return!1;var f=d.currentY[e],g=d.currentHeight[b]+d.currentY[b],i=null;return c.locked?g+=c.distance:(i=g+h,g=d.valueForFirstLockedAnchor[e]?Math.max(g+h,c.originalValue):i),g=Math.max(g,d.currentY[b]+d.currentHeight[b]/2),n(c,d,d.toTopAnchorsY,b,i),g=m(g,b,d.toTopAnchorsY,c),g=p(f,g),d.currentY[e]=g,l(e,f,g,d.dirty)},k[g]=function(b,c,d){var e=c.targetComponent;if(!q(d,e)||!q(d,b))return!1;if(a.has(d.locked,e))return!1;if(d.flat[e].layout&&d.flat[e].layout.rotationInDegrees)return!1;var f=d.currentHeight[e],g=d.currentHeight[b]+d.currentY[b],h=d.containerHeightMargin[e]||0,i=r(c,g+h,e,d);return i=s(i,e,c,d),i=m(i,b,d.toBottomAnchorsHeight,c),d.currentHeight[e]=i,l(e,f,i,d.dirty)},k[f]=function(b,c,d){var e=c.targetComponent;if(!q(d,e)||!q(d,b))return!1;if(a.has(d.locked,e))return!1;if(d.flat[e].layout&&d.flat[e].layout.rotationInDegrees)return!1;var f=d.currentHeight[e],g=d.currentHeight[b]+d.currentY[b],h=d.currentY[e],i=r(c,g-h,e,d);return i=s(i,e,c,d),i=m(i,b,d.toBottomAnchorsHeight,c),d.currentHeight[e]=i,l(e,f,i,d.dirty)},{enforceAnchors:v,HARD_WIRED_COMPS:j}}),define("layout/util/rootLayoutUtils",["lodash","utils"],function(a,b){"use strict";return{getLayerWidth:function(a,d,e){return a.isMobileView()||a.isMobileDevice()?b.layout.getRootWidth(d,e,a.getSiteWidth()):b.layout.getLayerWidth(d,e,a.getScreenWidth())},getRootWidth:function(a,c,e){return b.layout.getRootWidth(c,e,a.getSiteWidth())},getRootLeft:function(a,c,d){return b.layout.getRootLeft(c,d,a.getSiteX())}}}),define("layout/util/singleCompLayout",["zepto","lodash","utils","experiment","layout/util/rootLayoutUtils"],function(a,b,c,d,e){"use strict";function l(a){return"fixed"===a.position}function m(a){return c.layout.isHorizontallyStretched(a.layout)}function n(a){return i[a.componentType]}function o(a){return c.layout.isVerticallyStretched(a.layout)}function p(a){return i[a.componentType]}function q(a,b,c){var d=c.zIndex;"auto"!==d&&(d=parseFloat(d),isNaN(d)||(a.zIndex[b]=d))}function r(a,b,c,d){l(d)&&(a.fixed[b]=!0,a.top[b]=c.offsetTop,a.left[b]=c.offsetLeft)}function s(a,c,d,e){var f=b.get(e,"layout.width",0);m(e)?a.width[c]=d.offsetWidth:n(e)||!b.get(e,"layout.width")?a.width[c]=Math.max(d.offsetWidth,f):(a.width[c]=f,a.innerWidth[c]=f||d.clientWidth)}function t(a,c,d,e){var f=b.get(e,"layout.height",0),g=b.get(e,"layout.aspectRatio",0);g&&(f=g*a.width[c]),o(e)?a.height[c]=d.offsetHeight:p(e)||!b.get(e,"layout.height")?a.height[c]=Math.max(d.offsetHeight,f):a.height[c]=f}function u(a,c,d,e){var f=b.get(e,"layout.width",0),g=b.get(e,"layout.height",0);a.width[c]=f,a.innerWidth[c]=f||d.clientWidth,a.height[c]=g}function v(a,b,c,e){if(e.isDeadComp[a])return void u(e,a,b,c);var f=window.getComputedStyle(b);r(e,a,b,f),q(e,a,f),s(e,a,b,c),t(e,a,b,c),(d.isOpen("sv_stripMigrationViewer")||d.isOpen("sv_allowStripToColumnMigration"))&&i[c.componentType]&&(e.left[a]=b.offsetLeft,e.width[a]=b.offsetWidth)}function w(a){return a.getAttribute("data-dead-comp")}function x(a,b){if(!a)return!1;var c=b(a);return c?c:!1}function y(a,b,c,d,e,f){var g=b.id,i=x(g,c);if(i){e[g]=i,v(g,i,a,d);var j=w(i);if(j)return void(d.isDeadComp[g]=!0);k[b.type]&&k[b.type](g,d,e,f,b),h[b.type]&&h[b.type](g,d,e,f,b)}}function z(a,c,d,e,f){var g=a.id,i=x(g,c);if(i&&!w(i)&&j[a.type]){var k=j[a.type];"function"==typeof k&&(k=k(f,g,e,a)),b.forEach(k,function(i){var j=b.isPlainObject(i),k=j?i.pathArray:i,l=c.apply(void 0,[g].concat(k));if(l){var m=k.join(""),n=g+m;e[n]=l,d.height[n]=l.offsetHeight,d.width[n]=l.offsetWidth,d.innerWidth[n]=l.clientWidth,j&&h[i.type]&&h[i.type](n,d,e,f,a)}})}}function A(a){return a?a.docked&&(a.docked.vCenter||a.docked.bottom||a.docked.top):!1}function B(a){return a?a.docked&&a.docked.top&&a.docked.bottom:!1}function C(a,b,c,d){var e=b[a];if(e){var g=e.style;A(d)||(g.top=f(c.top[a])),B(d)||(g.height=f(c.height[a]))}}function D(b,d,f,g,h){var i=g.layout;if(i&&c.dockUtils.isHorizontalDockToScreen(i)){var j=e.getRootWidth(h,f,g.rootId),k=0-e.getRootLeft(h,f,g.rootId),l=c.dockUtils.getDockedStyle(i,h.getPageBottomMargin(),h.getScreenWidth(),j,k);f.left[b]=parseInt(l.left,10),a(d[b]).css(l)}}function E(a,b,c,d){var e=a.id,f=a.layout;C(e,b,c,f),D(e,b,c,a,d);var h=c.isDeadComp[e],i=!1;return!h&&g[a.type]&&b[e]&&(i=g[a.type](e,b,c,a,d)),i}var f=c.style.unitize,g={},h={},i={},j={},k={};return{patchComponent:E,measureComponent:y,measureComponentChildren:z,isComponentDead:w,registerPatcher:function(a,b){g[a]=b},registerPatchers:function(a,c){g[a]=function(){var a=arguments;b.forEach(c,function(b){b.apply(null,a)})}},registerCustomMeasure:function(a,b){h[a]=b},registerRequestToMeasureDom:function(a){i[a]=!0},registerRequestToMeasureChildren:function(a,b){j[a]=b},registerAdditionalMeasureFunction:function(a,b){k[a]=b},maps:{classBasedMeasureChildren:j,classBasedCustomMeasures:h,classBasedPatchers:g}}}),define("layout/util/layout",["zepto","lodash","layout/util/anchors","utils","layout/util/singleCompLayout","layout/util/anchorsGenerator","layout/util/skinAnchorsMetaData","experiment"],function(a,b,c,d,e,f,g,h){"use strict";function k(a,b,c){return a&&Math.max(b,Math.min(c,a))}function m(a,d){return a&&!b.includes(a,d.id)&&!c.HARD_WIRED_COMPS[d.id]&&!b.has(l,d.type)}function n(a){return a.componentType||a.documentType}function o(a,c,e){var f=c.getSiteData(),g=a.layout,i={dataItem:null,propertiesItem:null,layout:g,styleItem:null,id:a.id,type:n(a),structure:a,rootId:e};return i.layout&&(b.isFinite(i.layout.height)&&(i.layout.height=k(i.layout.height,d.siteConstants.COMP_SIZE.MIN_HEIGHT,d.siteConstants.COMP_SIZE.MAX_HEIGHT)),b.isFinite(i.layout.width)&&(i.layout.width=k(i.layout.width,d.siteConstants.COMP_SIZE.MIN_WIDTH,d.siteConstants.COMP_SIZE.MAX_WIDTH))),h.isOpen("wixCodeBinding")?(a.dataQuery&&(i.dataItem=c.getRuntimeDal().getCompData(a.id)||f.getDataByQuery(a.dataQuery,e)),a.propertyQuery&&(i.propertiesItem=c.getRuntimeDal().getCompProps(a.id)||f.getDataByQuery(a.propertyQuery,e,f.dataTypes.PROPERTIES)),(a.behaviorQuery||a.behaviors)&&(i.behaviorsItem=c.getRuntimeDal().getActionsAndBehaviors(a.id),i.behaviorsItem||(i.behaviorsItem=a.behaviors||b.get(f.getDataByQuery(a.behaviorQuery,e,f.dataTypes.BEHAVIORS),"items")))):(a.dataQuery&&(i.dataItem=f.getDataByQuery(a.dataQuery,e)),a.propertyQuery&&(i.propertiesItem=f.getDataByQuery(a.propertyQuery,e,f.dataTypes.PROPERTIES)),a.behaviorQuery&&(i.behaviorsItem=b.get(f.getDataByQuery(a.behaviorQuery,e,f.dataTypes.BEHAVIORS),"items")),a.behaviors&&(i.behaviorsItem=a.behaviors)),h.isOpen("designData")&&a.designQuery&&(i.designDataItem=f.getDataByQuery(a.designQuery,e,f.dataTypes.DESIGN)),a.styleId&&(i.styleItem=f.getDataByQuery(a.styleId,e,f.dataTypes.THEME)),i}function p(a,c,d,f,g,h){var i=f.getSiteData(),j=[];return b.forEach(b.keys(c),function(b){var k=o(c[b],f,g);if(!m(h,k)){var l=e.patchComponent(k,a,d,i);l&&j.push(b)}}),j}function q(a,c,d,e,f,g){var h=[];return b.forEach(a,function(a,b){h=h.concat(p(d,e[b],c,f,a.pageId,g))}),h}function r(b,c,d,e,f,g,h){var i=c(b.id);a(i).attr("data-leaving")||(j[b.componentType]?s(b,c,d,e,f,g,h):t(b,c,d,e,f,g,h))}function s(a,b,c,d,e,f,g){var h=e.getSiteData(),i=o(a,e,f);u(a,b,d),v(i,e,b,c,d,f,g),w(i,b,c,d,h,a,g)}function t(a,b,c,d,e,f,g){var h=e.getSiteData(),i=o(a,e,f);u(a,b,d),w(i,b,c,d,h,a,g),v(i,e,b,c,d,f,g)}function u(a,b,c){var d=b(a.id);d&&(c[a.id]=d)}function v(a,c,e,f,g,h,i){var j=c.getSiteData(),k=d.dataUtils.getChildrenData(a.structure,j.isMobileView());b.forEach(k,function(a){r(a,e,f,g,c,h,i)})}function w(a,b,c,d,f,g,h){m(h,a)||(e.measureComponentChildren(a,b,c,d,f),e.measureComponent(g,a,b,c,d,f))}function x(a,c,d,e,f){b.forOwn(a,function(a){r(a.structure,a.getDomNodeFunc,c,d,e,a.pageId,f)})}function y(a,d,e,f,g){var h={},i=e.getSiteData();i.anchorsMap=i.anchorsMap||{};var j=i.isMobileView();return a.inner&&(h.inner=c.enforceAnchors(a.inner.structure,d,i.anchorsMap,j,f,g),d.height.SITE_PAGES&&(d.height.SITE_PAGES=d.height[a.inner.pageId])),b.forOwn(a,function(a,b){"inner"!==b&&(h[b]=c.enforceAnchors(a.structure,d,i.anchorsMap,j,f,g))}),h}function z(a,c,e,f,g){var h=e.getSiteData(),i=a.id;i&&(c.fixed[i]?(f=c.top[i],g=c.left[i]):(f+=c.top[i],g+=c.left[i]||0),c.absoluteTop[i]=f,c.absoluteLeft[i]=g);var j=d.dataUtils.getChildrenData(a,h.isMobileView());b.forEach(j,function(a){z(a,c,e,f,g)})}function A(a,c,d){var e=b.sortBy(b.keys(a),function(a){return"inner"===a?1:0});b.forEach(e,function(b){z(a[b].structure,c,d,"inner"===b?c.absoluteTop.SITE_PAGES:0,"inner"===b?c.absoluteLeft.SITE_PAGES:0)})}function B(a,c,f,g){var h=a.id&&c(a.id);if(!h||!e.isComponentDead(h)){h&&i[a.componentType]&&g.push({structure:a,getDomNodeFunc:c,domNode:h});var j=f.getSiteData().isMobileView(),k=d.dataUtils.getChildrenData(a,j);b.forEach(k,function(a){B(a,c,f,g)})}}function C(a,d,e,f,g,h){var j=[],k=f.getSiteData(),l=k.isMobileView();return b.forEach(a,function(a){var b=o(a.structure,f),m=i[b.structure.componentType].measure(b,a.domNode,d,e,k,function(c){r(c,a.getDomNodeFunc,d,e,f,b.rootId,g)},function(a){c.enforceAnchors(a,d,k.anchorsMap,l,h,g)});m&&j.push(a)}),b.forEach(a,function(a){var b=o(a.structure,f);a.skipPatch||i[b.structure.componentType].patch(b,d,e,f.getSiteData())}),j}function D(a,c,d,e,f,g){var h=[];b.forOwn(a,function(a){B(a.structure,a.getDomNodeFunc,e,h)});for(var i=h,j=0;i.length&&3>j;)i=C(i,c,d,e,f,g),j++}function F(c){E=E||a("#SITE_ROOT");var d=E.offset()||{top:0},e={pageBottomByComponents:{},height:{},width:{},innerWidth:{},innerHeight:{},custom:{},containerHeightMargin:{},minHeight:{},minWidth:{},top:{},left:{},absoluteTop:{},absoluteLeft:{},fixed:{},zIndex:{},isDeadComp:{},siteMarginBottom:(b.parseInt(E.css("padding-bottom"),10)||0)-c.onlyForEyesBottomAdditionalMargin(),siteOffsetTop:d.top,clientWidth:0,skipPatch:{},injectedAnchors:{}};return e.clientWidth=c.getBodyClientWidth(),e.clientHeight=document.documentElement.clientHeight,e.width.screen=c.getScreenWidth(),e.height.screen=e.clientHeight,e.innerHeight.screen=window.innerHeight,e.innerWidth.screen=window.innerWidth,e.width.LAYER_masterPage=e.width.screen,e.width["LAYER_"+c.getPrimaryPageId()]=e.width.screen,h.isOpen("sv_popups")&&c.isPopupOpened()&&(e.width["LAYER_"+c.getCurrentPopupId()]=a("#POPUPS_ROOT").prop("clientWidth")),e}function G(a){return a&&(a.top={}),a}function H(a,b,c,d,e){var f=b.getSiteData();f.updateScreenSize(),delete a.undefined;var g={},h=e&&d&&c;e=G(e)||F(f),D(a,e,g,b,d,c),x(a,e,g,b,h&&d);var i=y(a,e,b,c,d),j=q(a,e,g,i,b,h&&d);return A(a,e,b),f.measureMap=e,j}function I(a,b){var c="SITE_STRUCTURE"===a?b.getPageData("masterPage").structure:b.getPageData(a).structure;b.anchorsMap=b.anchorsMap||{};var d=b.getAllTheme();b.anchorsMap[c.id]=f.createPageAnchors(c,d,b.isMobileView())}function J(a,c,d){var e=d.getSiteData(),g=e.getAllTheme(),h=f.createChildrenAnchors(a,g,e.isMobileView());b.assign(e.anchorsMap[c],h)}var E,i={},j={},l={"mobile.core.components.Page":!0,"wysiwyg.viewer.components.StripColumnsContainer":!0,"wysiwyg.viewer.components.Column":!0};return{registerLayoutInnerCompsFirst:function(a,b,c){i[a]={measure:b,patch:c}},registerMeasureChildrenFirst:function(a,b){j[a]=b},registerPatcher:function(a,b){e.registerPatcher(a,b)},registerPatchers:function(a,b){e.registerPatchers(a,b)},registerCustomMeasure:function(a,b){e.registerCustomMeasure(a,b)},registerAdditionalMeasureFunction:function(a,b){e.registerAdditionalMeasureFunction(a,b)},registerRequestToMeasureDom:function(a){e.registerRequestToMeasureDom(a)},registerRequestToMeasureChildren:function(a,b){e.registerRequestToMeasureChildren(a,b)},createPageAnchors:I,createChildrenAnchors:J,getNonAnchorableHeightForSkin:g.getNonAnchorableHeightForSkin,reLayout:H,enforceAnchors:c.enforceAnchors,packTextAnchors:f.packTextAnchors}}),define("layout/specificComponents/wixHomepageMenuLayout",["layout/util/layout"],function(a){"use strict";a.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",[["buttonsContainer"]]),a.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",function(a,b){var c=b.height[a+"buttonsContainer"];b.height[a]=Math.max(b.height[a],c),b.minHeight[a]=c})}),define("layout/specificComponents/fiveGridLineLayout",["zepto","layout/util/layout","layout/util/rootLayoutUtils"],function(a,b,c){"use strict";var d=function(a,b,d,e,f){var g=b[a],h=d.width.screen,i=c.getRootWidth(f,d,e.rootId),j=0,k=i,l=e.propertiesItem;l&&l.fullScreenModeOn&&(h>i&&(j=-(h-i)/2,k=h),g.style.setProperty("width",k+"px"),g.style.setProperty("left",j+"px"),d.width[a]=k,d.left[a]=j)};b.registerPatcher("wysiwyg.viewer.components.FiveGridLine",d),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.FiveGridLine",[["line"]]),b.registerRequestToMeasureDom("wysiwyg.viewer.components.FiveGridLine"),b.registerCustomMeasure("wysiwyg.viewer.components.FiveGridLine",function(b,c,d){var e=c.height[b+"line"],f=window.getComputedStyle(a(d[b])[0]),g=parseFloat(f.borderBottomWidth);c.height[b]=Math.max(5,g,e),c.minHeight[b]=e})}),define("layout/specificComponents/domainSearchLayout",["lodash","layout/util/layout"],function(a,b){"use strict";function c(a,b){var c=a+"content";[["width","minWidth"],["height","minHeight"]].forEach(function(d){var e=d[0],f=d[1];b[e][c]>b[e][a]&&(b[f]||(b[f]={}),b[e][a]=b[f][a]=b[e][c])})}return b.registerRequestToMeasureChildren("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",[["content"]]),b.registerCustomMeasure("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",c),{}}),define("layout/specificComponents/registerToMeasureOnly",["layout/util/layout"],function(a){"use strict";return a.registerRequestToMeasureDom("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),a.registerRequestToMeasureDom("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),a.registerRequestToMeasureDom("wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer"),a.registerRequestToMeasureDom("wysiwyg.viewer.components.Video"),a.registerRequestToMeasureDom("wysiwyg.viewer.components.WTwitterTweet"),a.registerRequestToMeasureDom("wysiwyg.common.components.disquscomments.viewer.DisqusComments"),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",[["itemsContainer"]]),{}}),define("layout/specificComponents/registerToPureDomMeasure",["layout/util/layout"],function(a){"use strict";function b(b){a.registerCustomMeasure(b,function(a,b,c){var d=c[a];b.height[a]=d.offsetHeight,b.width[a]=d.offsetWidth})}return b("wysiwyg.viewer.components.FlashComponent"),b("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),b("wysiwyg.viewer.components.WGooglePlusOne"),b("wysiwyg.viewer.components.LinkBar"),b("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer"),b("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox"),b("wysiwyg.viewer.components.PayPalButton"),b("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow"),b("wysiwyg.viewer.components.FlickrBadgeWidget"),b("wysiwyg.viewer.components.WTwitterFollow"),b("wysiwyg.viewer.components.WTwitterTweet"),b("wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton"),{}}),define("layout/specificComponents/PinItPinWidgetLayout",["layout/util/layout"],function(a){"use strict";return a.registerCustomMeasure("wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget",function(a,b,c){b.height[a]=c[a].offsetHeight,b.width[a]=c[a].offsetWidth}),{}}),define("layout/specificComponents/areaTooltipLayout",["layout/util/layout"],function(a){"use strict";a.registerCustomMeasure("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a,b){var c=a+"content";b.custom[a]=b.height[a]/2-b.height[c]/2}),a.registerPatcher("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a,b,c,d){var e,f,g,h,i;if(f=a+"tooltip",c.height[f]){e=a+"content";var j=d.propertiesItem.tooltipPosition;switch(j){case"top":i=-c.height[e]-14+"px",h=0;break;case"right":i=c.custom[a]+"px",h=c.width[a]+14+"px";break;case"bottom":i=c.height[a]+14+"px",h=0;break;case"left":i=c.custom[a]+"px",h="-414px";break;default:return}g=b[f].style,g.top=i,g.left=h}}),a.registerRequestToMeasureChildren("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",[["tooltip"],["content"]])}),define("layout/specificComponents/menuLayout",["zepto","lodash","layout/util/layout","utils"],function(a,b,c,d){"use strict";function f(a,b,c){var e=b[c];return d.style.unitize(a-parseInt(e.getAttribute("data-menuborder-y"),10)-parseInt(e.getAttribute("data-label-pad"),10)-parseInt(e.getAttribute("data-ribbon-els"),10)-parseInt(e.getAttribute("data-menubtn-border"),10)-parseInt(e.getAttribute("data-ribbon-extra"),10))}function g(b,c,d,e,g,h,i){for(var j=0,k=null,l=0;l<d.length;l++){var m=e[l],n=m>0,o=b+d[l],p=c[o],q=a(p);n?(j++,k=p,q.css({width:m+"px",height:g-h.height+"px",position:"relative","box-sizing":"border-box",overflow:"visible"}),q.find("p").css({"line-height":f(g,c,b)})):q.css({height:"0px",overflow:"hidden",position:"absolute"})}1===j&&(a(i).attr("data-listposition","lonely"),a(k).attr("data-listposition","lonely"))}function h(c,d,f,h,i){var j=f.height[c],k=d[c],m=e.nonHiddenPageIdsFromMainMenu(i),n=m.concat("__more__"),o=d[c+"moreContainer"];l(d[c],f.custom[c+"needTopOpenMenuUp"]);var p=f.custom[c+"menuItemContainerExtraPixels"],q=f.custom[c+"realWidths"];f.custom.originalGapBetweenTextAndBtn&&b.forEach(n,function(b){var e=a(d[c+b]);e.attr("data-originalGapBetweenTextAndBtn")||e.attr("data-originalGapBetweenTextAndBtn",f.custom.originalGapBetweenTextAndBtn[c+b+"label"])}),a(d[c]).css({height:j}),a(d[c+"itemsContainer"]).css({height:j-parseInt(k.getAttribute("data-menuborder-y"),10)-parseInt(k.getAttribute("data-ribbon-extra"),10)-parseInt(k.getAttribute("data-ribbon-els"),10)+"px"}),g(c,d,n,q,j,p,o)}function i(b){var c=b.lastChild,d=parseInt(a(c).css("margin-left"),10)||0,e=parseInt(a(c).css("margin-right"),10)||0;return d+e}function j(a){var b=parseFloat(a);return isFinite(b)?b:0}function k(b,c){var d=a(b).css(["border-top-width","border-bottom-width","border-left-width","border-right-width","padding-top","padding-bottom","padding-left","padding-right","margin-top","margin-bottom","margin-left","margin-right"]),e=j(d["border-top-width"])+j(d["padding-top"]),f=j(d["border-bottom-width"])+j(d["padding-bottom"]),g=j(d["border-left-width"])+j(d["padding-left"]),h=j(d["border-right-width"])+j(d["padding-right"]);return c&&(e+=j(d["margin-top"]),f+=j(d["margin-bottom"]),g+=j(d["margin-left"]),h+=j(d["margin-right"])),{top:e,bottom:f,left:g,right:h,height:e+f,width:g+h}}function l(b,c){c?a(b).attr("data-dropmode","dropUp"):a(b).attr("data-dropmode","dropDown")}function m(a){var b=a.getBoundingClientRect(),c=b.top;return c>window.innerHeight/2}function n(a){var c=e.nonHiddenPageIdsFromMainMenu(a).concat("__more__"),d=[[]],f=[["moreContainer"],["itemsContainer"]];return b.forEach(d,function(a){f=f.concat(b.map(c,function(b){return[b].concat(a)}))}),f}function o(c,d,e,f){d.custom.labelWidths||(d.custom.labelWidths={}),b.forEach(f,function(b){var f=a(e[c+b]),g=f.find("p")[0],h=window.getComputedStyle(g);d.custom.labelWidths[c+b+"label"]=parseInt(h.width,10)+parseInt(h.paddingLeft,10)+parseInt(h.paddingRight,10)})}function p(c,d,f,g,h){var i=d.width[c],j=b.map(h,function(b){var f,e=a(g[c+b]);return e.attr("data-originalGapBetweenTextAndBtn")?f=parseInt(e.attr("data-originalGapBetweenTextAndBtn"),10):(d.custom.originalGapBetweenTextAndBtn||(d.custom.originalGapBetweenTextAndBtn={}),d.custom.originalGapBetweenTextAndBtn[c+b+"label"]=d.width[c+b]-d.custom.labelWidths[c+b+"label"],f=d.width[c+b]-d.custom.labelWidths[c+b+"label"]),d.width[c+b]>0?d.custom.labelWidths[c+b+"label"]+f:0}),k=j.pop(),l=f.sameWidthButtons,m=f.stretchButtonsToMenuWidth,n=!1,o=d.custom[c+"menuItemContainerMargins"],p=d.custom[c+"menuItemMarginForAllChildren"],q=d.custom[c+"menuItemContainerExtraPixels"],r=e.getMaxWidth(j),s=e.getDropDownWidthIfOk(i,l,m,j,o,r,p,q);if(!s){for(var t=1;t<=j.length;t++)if(s=e.getDropDownWidthIfOk(i,l,m,j.slice(0,-1*t).concat(k),o,r,p,q)){n=!0;break}s||(n=!0,s=[k])}if(n){var u=s[s.length-1];for(s=s.slice(0,-1);s.length<h.length;)s.push(0);s[s.length-1]=u}return{realWidths:s,moreShown:n}}function q(b,c,d,f,g){var h=a("#"+b+"itemsContainer")[0],j=d[b+"moreContainer"];c.custom[b+"menuItemContainerMargins"]=i(h),c.custom[b+"menuItemContainerExtraPixels"]=k(h,!0),c.custom[b+"needTopOpenMenuUp"]=m(d[b]),c.custom[b+"menuItemMarginForAllChildren"]=!g.propertiesItem.stretchButtonsToMenuWidth||"false"!==h.getAttribute("data-marginAllChildren");var l=e.nonHiddenPageIdsFromMainMenu(f).concat("__more__");o(b,c,d,l);var n=p(b,c,g.propertiesItem,d,l);c.custom[b+"realWidths"]=n.realWidths,c.custom[b+"isMoreShown"]=n.moreShown,c.custom[b+"moreContainerBorderLeft"]=parseInt(a(j).css("border-left"),10);
}var e=d.menuUtils;return c.registerPatcher("wysiwyg.viewer.components.menus.DropDownMenu",h),c.registerCustomMeasure("wysiwyg.viewer.components.menus.DropDownMenu",q),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.menus.DropDownMenu",n),{}}),define("layout/specificComponents/imageLayout",["zepto","lodash","utils","layout/util/layout"],function(a,b,c,d){"use strict";function i(d,e,f,g,h,i,j,k){var l,m=i.custom[d]&&i.custom[d].isZoomed,n=i.custom[d]&&i.custom[d].isSvgImage,o=i.custom[d]&&i.custom[d].filterId,p={imageData:g,containerWidth:m?g.width:h.width,containerHeight:m?g.height:h.height,displayMode:g.displayMode,siteData:j,alignType:k};if(!p.containerWidth||!p.containerHeight||!g.uri)return null;var r,q=a(e);return f&&(r=a(f),l=c.imageUtils.getImageComputedProperties(p,"svg"),r.width(p.containerWidth),r.height(p.containerHeight),n)?(r.attr(l.attr.container),b.forEach(l.attr.img,function(a,b){q.attr(b,a)}),q.attr("xlink:href",l.uri),q.attr("filter","url(#"+o+")"),null):(l=c.imageUtils.getImageComputedProperties(p,"img"),q.css(l.css.img),l.uri)}function j(b,c){if(c){var d=a(b);d.attr("src",c)}}function k(a,c,d,e,k,l,m){var n=i(c,d[c+f],d[c+g],k,l,e,a,m);b.has(a,["imageResizeHandlers",c])?a.imageResizeHandlers[c](d[c+f],n):(j(d[c+f],n),b.set(a,["imageResizeHandlers",c],b.debounce(j,h,{trailing:!0})))}function l(a,b,c,d,f,g,h){e(b[a],g),k(d,a,b,c,f,g,h)}function m(a,c,d){var e,h=!1;d[a+f]=d[a].querySelector("img")||d[a].querySelector("image"),d[a+g]=d[a].querySelector("svg"),d[a+f]&&"image"===d[a+f].nodeName.toLowerCase()&&(h=!0,e=b.get(d[a].querySelector("filter"),"id")),c.custom[a]={isZoomed:d[a].getAttribute("data-image-zoomed"),isSvgImage:h,filterId:e}}var e=c.style.assignStyle,f="image",g="svg",h=250;return d.registerCustomMeasure("core.components.Image",m),{patchNodeImage:l,measureNodeImage:m}}),define("layout/specificComponents/sliderGalleryLayout",["layout/util/layout","utils","imageClientApi","zepto","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f){"use strict";function i(a,b,c,d,e){var f=Math.floor(b+parseInt(a.attr("data-additional-height"),10));return g.getSizeAfterScaling({itemHeight:f,itemWidth:Math.floor(f*(e&&e.aspectRatio?e.aspectRatio:1)),displayerData:c,imageMode:e?e.imageMode:"clipImage",heightDiff:parseInt(d.attr("data-height-diff"),10)||0,widthDiff:parseInt(d.attr("data-width-diff"),10)||0,bottomGap:parseInt(d.attr("data-bottom-gap"),10)||0})}function j(a,b,c){var e=d(b),f={imageIndex:e.data("image-index"),width:e.data("displayer-width"),height:e.data("displayer-height"),uri:e.data("displayer-uri")};return{node:b,data:f,imageNodeId:a+a+c+"image"}}function k(a,b,c){var f=c[a+"images"],g=d(f).children();b.custom[a]={displayers:e.map(g,e.partial(j,a))}}function l(a,b,g,j,k){var p,l=g.height[a],m=g.width[a],n=d(b[a]),o=e.get(j,"dataItem.items");d(b[a]).css({height:l,width:m}),e.forEach(g.custom[a].displayers,function(a){var m=a.data,q=d(a.node);p=o&&o[m.imageIndex]?o[m.imageIndex]:m,p=e.assign(p,{displayMode:c.fittingTypes.SCALE_TO_FILL});var r=i(n,l,p,q,j.propertiesItem);h.updateImageWrapperSizes(d(q.children()[0]),r),f.patchNodeImage(a.imageNodeId,b,g,k,p,h.getContainerSize(r.imageWrapperSize,d(q)))})}function m(a,b){var c=[["images"],["itemsContainer"]],f=d("#"+b+"images").children();return e.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"};c.push(b)}),c}var g=b.matrixScalingCalculations,h=b.galleriesCommonLayout;return a.registerRequestToMeasureChildren("wysiwyg.viewer.components.SliderGallery",m),a.registerCustomMeasure("wysiwyg.viewer.components.SliderGallery",k),a.registerPatcher("wysiwyg.viewer.components.SliderGallery",l),{}}),define("layout/specificComponents/verticalMenuLayout",["zepto","lodash","layout/util/layout","utils","skins"],function(a,b,c,d,e){"use strict";function f(a){var b=a.dataset;return{border:b&&b.paramBorder?parseInt(b.paramBorder,10):0,separator:b&&b.paramSeparator?parseInt(b.paramSeparator,10):0}}function g(b,c,d){var e={"line-height":d+"px"};c&&(e["text-overflow"]="ellipsis"),a(b).css(e)}function h(a,b){a.css({width:b})}function i(c,f,i,j,k){h(a(f[c]),i.width[c]);var l=d.menuUtils.getSiteMenu(k),m=i.custom[c],n=e.params.getSkinExports(j.styleItem.skin),o=d.verticalMenuCalculations.getVisibleItemsCount(l),p=Math.max(i.minHeight[c],j.layout.height),q=d.verticalMenuCalculations.getItemHeight(p,m.params.separator,o,n),r=d.verticalMenuCalculations.getLineHeight(q,m.params.separator,m.params.border,n);b.forEach(m.linksInfo,function(a){g(a.node,a.hasOverflow,r)}),b.forEach(m.liNodes,function(a){a.style.height=q+"px"})}function j(c,d,e){var g=e[c],h=a(g),i=h.find("a.level0"),j=0,k=0;b.forEach(i,function(a){a.offsetWidth>j&&(j=a.offsetWidth),k+=a.offsetHeight}),d.custom[c]={linksInfo:b.map(h.find("a"),function(a){return{node:a,hasOverflow:a.offsetWidth>j}}),liNodes:h.find("li"),params:f(g)};var l=parseInt(g.getAttribute("data-param-border")||0,10),m=parseInt(g.getAttribute("data-param-padding")||0,10),n=j+2*m+2*l;n>d.width[c]&&(d.width[c]=n),d.minHeight[c]=k}return c.registerCustomMeasure("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",j),c.registerPatcher("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",i),{}}),define("layout/specificComponents/loginButtonLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(a,b){var c=a+"container";b.minHeight[a]=b.height[c],b.height[c]>b.height[a]&&(b.height[a]=b.height[c])}function e(b,c,d){var e=b+"container",f=c[e],g=d.height[b],h=d.height[e],i=(g-h)/2;a(f).css({"margin-top":i+"px"})}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.LoginButton",[["container"]]),c.registerCustomMeasure("wysiwyg.viewer.components.LoginButton",d),c.registerPatcher("wysiwyg.viewer.components.LoginButton",e)}),define("layout/util/spaceCalculationsRegardingWixAds",[],function(){"use strict";function a(a){var b=parseInt(a,10);return isNaN(b)?0:b}function b(b){return a(b.height.WIX_ADS)+a(b.top.WIX_ADS)}function c(b){return b.height.WIX_ADSdesktopWADTop||b.top.WIX_ADSdesktopWADTop?a(b.height.WIX_ADSdesktopWADTop)+a(b.top.WIX_ADSdesktopWADTop):a(b.height.WIX_ADS)+a(b.top.WIX_ADS)}function d(b){var d,e,c=b.height.screen;return b.height.WIX_ADSdesktopWADTop||b.height.WIX_ADSdesktopWADBottom?(d=a(b.height.WIX_ADSdesktopWADTop)+a(b.top.WIX_ADSdesktopWADTop),e=a(b.height.WIX_ADSdesktopWADBottom),c-d-e):(d=a(b.height.WIX_ADS)+a(b.top.WIX_ADS),c-d)}return{getFirstVisibleTopCoordinate:b,getFirstUnoccupiedTopCoordinate:c,getScreenHeightExcludingAds:d}}),define("layout/specificComponents/dialogLayout",["zepto","lodash","layout/util/layout","layout/util/spaceCalculationsRegardingWixAds"],function(a,b,c,d){"use strict";function e(b,c,e){var f=b+"dialog",g=e.height[f],h=c[f],i=c[b],j=e.height.screen,k=d.getFirstUnoccupiedTopCoordinate(e),l=d.getScreenHeightExcludingAds(e),m=20;a(i).css({height:j+"px"});var n=(l-g)/2;a(h).css({top:Math.max(n,m)+k+"px"})}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",e),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",e),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",e),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",e),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",e),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.NotificationDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.NotificationDialog",e),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.CreditsDialog",[["dialog"]]),c.registerPatcher("wysiwyg.viewer.components.dialogs.CreditsDialog",e)}),define("layout/util/optimizedCssImageLayout",["lodash","zepto","utils"],function(a,b,c){"use strict";function f(b,c,d){var e=a.some(d,function(a,b){return a!==c.data("image-css-"+b)});b.imageCss=d,b.shouldPatchCss=e}function g(b,c){return!a.includes(b,c)||Boolean(b)!==Boolean(c)}function h(a,b){return a?c.urlUtils.joinURL(b.getStaticMediaUrl(),a):""}function i(a,b,c,d){var e=b.css("backgroundImage");a.previousBackgroundImageCssUrl=e,a.backgroundImageCssUrl=h(c,d),a.shouldPatchUri=g(e,c)}function j(a,c,d,e,g){var h=b(c);f(a,h,d),i(a,h,e,g)}function k(a,b){a.getAttribute("data-type")===e.BG_IMAGE?a.style.backgroundImage=b?'url("'+b+'")':"":a.src=b}function l(b,c,e,f){var g=e.backgroundImageCssUrl,h=e.previousBackgroundImageCssUrl;return f.imageResizeHandlers=f.imageResizeHandlers||{},h&&g?(f.imageResizeHandlers[b]||(f.imageResizeHandlers[b]=a.debounce(k,d,{trailing:!0})),void f.imageResizeHandlers[b](c[b],g)):void k(c[b],g)}function m(c,d,e,f){var g=b(e[d]);c.shouldPatchCss&&(g.css(c.imageCss),a.forOwn(c.imageCss,function(a,b){g.data("image-css-"+b,a)})),c.shouldPatchUri&&l(d,e,c,f)}var d=250,e=c.balataConsts;return{cacheCssImageMeasureData:j,patchCssImage:m}}),define("layout/specificComponents/siteBackgroundLayout",["zepto","lodash","layout/util/layout","imageClientApi","layout/util/optimizedCssImageLayout"],function(a,b,c,d,e){"use strict";function i(b,c,d,f,g){d.top[b]=q(d),d.width[b]=r(d,g),d.height[b]=p(d,g),d.height.currentImage=d.height.SITE_STRUCTURE;var i=c[b],j=c.siteBackgroundcurrentVideo;if(a(i).css({top:d.top[b]+"px",height:d.height[b]+"px",width:d.width[b]+"px"}),e.patchCssImage(d.custom[b],h,c,g),j){var l=d.custom[b].bgData;a(j).css(k(l,d,g,j.getAttribute("data-quality")))}}function j(a,b){var c=a.getDataByQuery(b),d=a.isMobileView()?"mobile":"desktop";return c.pageBackgrounds[d].ref}function k(a,c,d,e){var f={position:"relative",minWidth:0,minHeight:0,top:0,left:0},g=a.mediaRef;if("WixVideo"!==b.get(g,"type")||d.isTouchDevice())return f;var h=b.find(g.qualities,{quality:e}),i=m(c.width.screen,c.height.screen,h.width,h.height),j=n(a.fittingType,i,h.width,h.height),k=o(a.alignType,i,j,c.width.screen,c.height.screen);return f={position:"relative",minWidth:j.width,minHeight:j.height,top:k.top,left:k.left}}function l(a,c){var e=a.mediaRef,h={backgroundSize:"",backgroundPosition:"",backgroundRepeat:""},i="";if(e){"WixVideo"===e.type&&(e=e.posterImageRef);var j={id:e.uri,width:e.width,height:e.height},k=c.isMobileView()?g:f,l=Math.min(k,j.width),m=Math.min(k,Math.round(l/(j.width/j.height))),n={width:l,height:m,htmlTag:"bg",alignment:a.alignType},o=b.defaults({quality:85},e.quality||{}),p=d.getData(a.fittingType,j,n,o,c.browser);i=p.uri,h={backgroundSize:p.css.container.backgroundSize,backgroundPosition:p.css.container.backgroundPosition,backgroundRepeat:p.css.container.backgroundRepeat}}return{css:h,uri:i}}function m(a,b,c,d){return{wScale:a/c,hScale:b/d}}function n(a,b,c,e){var f,g,h,i=d.fittingTypes;switch(a){case i.SCALE_TO_FILL:h=Math.max(b.wScale,b.hScale),f=Math.round(c*h),g=Math.round(e*h);break;case i.SCALE_TO_FIT:h=Math.min(b.wScale,b.hScale),f=Math.round(c*h),g=Math.round(e*h)}return{width:f,height:g}}function o(a,b,c,e,f){var g={},h=d.alignTypes;switch(a){case h.CENTER:g.left=b.wScale>=b.hScale?0:Math.floor((e-c.width)/2),g.top=b.wScale<=b.hScale?0:Math.floor((f-c.height)/2);break;case h.LEFT:g.left=0,g.top=b.wScale<=b.hScale?0:Math.floor((f-c.height)/2);break;case h.RIGHT:g.left=Math.floor(e-c.width),g.top=b.wScale<=b.hScale?0:Math.floor((f-c.height)/2);break;case h.TOP:g.left=b.wScale>=b.hScale?0:Math.floor((e-c.width)/2),g.top=0;break;case h.BOTTOM:g.left=b.wScale>=b.hScale?0:Math.floor((e-c.width)/2),g.top=Math.floor(f-c.height);break;case h.TOP_LEFT:g.left=0,g.top=0;break;case h.TOP_RIGHT:g.left=Math.floor(e-c.width),g.top=0;break;case h.BOTTOM_LEFT:g.left=0,g.top=Math.floor(f-c.height);break;case h.BOTTOM_RIGHT:g.left=Math.floor(e-c.width),g.top=Math.floor(f-c.height)}return g}function p(a,b){var c=a.height[b.getStructureCompId()],d=a.height.screen-q(a);return Math.max(d,c)}function q(a){var b=parseInt(a.height.WIX_ADS,10);b=isNaN(b)?0:b;var c=parseInt(a.top.WIX_ADS,10);return c=isNaN(c)?0:c,b+c}function r(a,b){var c=a.width[b.getStructureCompId()];return Math.ceil(Math.max(a.width.screen,c))}function s(a){return[[a.getPrimaryPageId()]]}function t(a,b,c,d){c[h]=document.querySelector(".siteBackgroundcurrentImage"),c.siteBackgroundcurrentVideo=document.querySelector(".siteBackgroundcurrentVideo");var f=d.getPrimaryPageId(),g=j(d,f);b.custom[a]={bgData:g};var i=l(g,d);e.cacheCssImageMeasureData(b.custom[a],c[h],i.css,i.uri,d)}var f=1920,g=1e3,h="siteBackgroundcurrentImage";c.registerRequestToMeasureDom("wysiwyg.viewer.components.SiteBackground"),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteBackground",s),c.registerPatcher("wysiwyg.viewer.components.SiteBackground",i),c.registerCustomMeasure("wysiwyg.viewer.components.SiteBackground",t)}),define("layout/specificComponents/buttonLayout",["zepto","lodash","experiment","utils","layout/util/layout"],function(a,b,c,d,e){"use strict";function g(a){var b=window.getComputedStyle(a);return parseInt(b.paddingTop,10)+parseInt(b.paddingBottom,10)}function h(a){var b=window.getComputedStyle(a);return parseInt(b.marginRight,10)+parseInt(b.marginLeft,10)}function i(b,c,d){function n(){return i!==f.data("prevText")}function o(){return c.minWidth[b]<f.data("prevMinWidth")}function p(){return f.data("prevWidth")===f.data("prevMinWidth")}var e=b+"label",f=a(d[b]),i=f.text(),j=window.getComputedStyle(d[b]).minHeight;j&&parseInt(j,10)||(j=c.height[e]),c.minHeight[b]=parseInt(j,10),c.minWidth[b]=c.width[e]+h(d[e]);var k=f.data("shouldPreventWidthMeasurement");k||(c.width[b]=n()&&o()&&p()&&c.width[e]>0?c.minWidth[b]:Math.max(c.width[b],c.minWidth[b])),c.height[b]=Math.max(c.height[b],c.minHeight[b]),c.custom[b]={align:f.attr("data-align"),margin:parseInt(f.attr("data-margin"),10),shouldPreventWidthMeasurement:k,text:i},c.custom[e]={verticalPadding:g(d[e])};var l=c.width[e]+c.custom[b].margin>c.width[b],m=c.custom[b].align;"center"!==m&&(c.custom[e]["margin-"+m]=l?c.width[b]-c.width[e]:c.custom[b].margin)}function j(a,c,d){var e={"line-height":d.height[a]-d.custom[c].verticalPadding+"px"};return b.reduce(["margin-left","margin-right"],function(a,e){return b.isUndefined(d.custom[c][e])||(a[e]=d.custom[c][e]),a},e)}function k(b,c,d){var e={height:d.height[b],"min-height":d.minHeight[b]};d.custom[b].shouldPreventWidthMeasurement||(e.width=d.width[b]),f(c[b],e);var g=b+"label",h=j(b,g,d);f(c[g],h);var i=a(c[b]);i.data("prevText",d.custom[b].text),i.data("prevMinWidth",d.minWidth[b]),i.data("prevWidth",d.width[b])}var f=d.style.assignStyle;e.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteButton",[["label"]]),e.registerCustomMeasure("wysiwyg.viewer.components.SiteButton",i),e.registerPatcher("wysiwyg.viewer.components.SiteButton",k),c.isOpen("sv_popups")&&(e.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupCloseTextButton",[["label"]]),e.registerCustomMeasure("wysiwyg.viewer.components.PopupCloseTextButton",i),e.registerPatcher("wysiwyg.viewer.components.PopupCloseTextButton",k))}),define("layout/specificComponents/photoLayout",["zepto","lodash","layout/util/layout","layout/specificComponents/imageLayout","utils","imageClientApi"],function(a,b,c,d,e,f){"use strict";function i(a){return a===f.fittingTypes.LEGACY_FIT_WIDTH?f.fittingTypes.LEGACY_FIT_HEIGHT:h[a]||a}function j(a,b,c){var d=b.height[a]-(b.custom[a].marginHeight||0),e=b.width[a]-(b.custom[a].marginWidth||0),g={width:e>0?e:b.width[a],height:d>0?d:b.height[a]},h=b.custom[a].exactHeight-(b.custom[a].marginHeight||0);return c===f.fittingTypes.LEGACY_FIT_HEIGHT&&Math.ceil(h)===g.height&&(g.height=h),g}function k(b,c,d){var e=a(d[b]),f=parseInt(e.data("content-padding-horizontal"),10),g=parseInt(e.data("content-padding-vertical"),10),h=parseFloat(e.data("exact-height"));c.height[b]=c.custom[b]&&c.custom[b].thisIsMyHeight||d[b].offsetHeight,c.custom[b]={marginWidth:f,marginHeight:g,exactHeight:h}}function l(a,c,f,h,k){var l=a+"img",m=a+"link",n=h.dataItem,o=h.propertiesItem,p=o&&o.displayMode||"fill",q=i(p),r=e.imageUtils.getContainerSize(j(a,f,q),{width:n.width,height:n.height},q),s=e.layout.isVerticallyStretched(h.layout),t=e.layout.isHorizontallyStretched(h.layout),u={width:t?"":r.width+f.custom[a].marginWidth,height:s?"":r.height+f.custom[a].marginHeight},v={width:n.width,height:n.height,displayMode:q,uri:n.uri};b.assign(v,b.pick(n,["crop","quality"])),d.patchNodeImage(l,c,f,k,v,r),g(c[a],u),g(c[m],r)}var g=e.style.assignStyle,h={fitWidthStrict:f.fittingTypes.LEGACY_FIT_WIDTH,fitHeightStrict:f.fittingTypes.LEGACY_FIT_HEIGHT},m={pathArray:["img"],type:"core.components.Image"};c.registerRequestToMeasureDom("wysiwyg.viewer.components.WPhoto"),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.WPhoto",[m,["link"]]),c.registerPatcher("wysiwyg.viewer.components.WPhoto",l),c.registerCustomMeasure("wysiwyg.viewer.components.WPhoto",k),c.registerRequestToMeasureDom("wysiwyg.viewer.components.ClipArt"),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.ClipArt",[m,["link"]]),c.registerPatcher("wysiwyg.viewer.components.ClipArt",l),c.registerCustomMeasure("wysiwyg.viewer.components.ClipArt",k)}),define("layout/specificComponents/documentMediaLayout",["zepto","lodash","layout/util/layout","imageClientApi","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function f(c,f,g,h,i){var j=b.defaults({displayMode:d.fittingTypes.LEGACY_FULL},h.dataItem);e.patchNodeImage(c+"img",f,g,i,j,g.custom[c].containerSize),a(f[c]).width(g.width[c])}function g(b,c,d){var e=a(d[b]),f=b+"label",g=c.width[f],h=c.height[f],i=Math.max(c.width[b],g),j=e.data("content-padding-left"),k=e.data("content-padding-right"),l=e.data("content-padding-top"),m=e.data("content-image-height"),n={width:i-j-k,height:Math.max(m-l-h,1)};c.custom[b]={containerSize:n},c.width[b]=i,c.minWidth[b]=g}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.documentmedia.DocumentMedia",[["label"],{pathArray:["img"],type:"core.components.Image"},["link"]]),c.registerCustomMeasure("wysiwyg.viewer.components.documentmedia.DocumentMedia",g),c.registerPatcher("wysiwyg.viewer.components.documentmedia.DocumentMedia",f)}),define("layout/util/calculateScreenWidthDimensions",["utils","layout/util/rootLayoutUtils"],function(a,b){"use strict";var c=a.layout.stretchInCenteredContainer;return function(a,e,f){var g=Math.max(b.getLayerWidth(e,a,f),b.getRootWidth(e,a,f));return c(b.getRootWidth(e,a,f),g)}}),define("layout/specificComponents/bgImageLayout",["zepto","lodash","layout/util/layout","utils","imageClientApi","layout/util/optimizedCssImageLayout","layout/specificComponents/imageLayout","experiment"],function(a,b,c,d,e,f,g,h){"use strict";function k(a){return!a||d.urlUtils.isExternalUrl(a)}function l(a,c,d,f,g,h){var i=g.mobile.getDevicePixelRatio(),j={width:f.width,height:f.height,alignment:c,htmlTag:h||"bg",pixelAspectRatio:i},k={id:d.uri,width:d.width,height:d.height},l=b.defaults({quality:85},d.quality||{});return e.getData(a,k,j,l,g.browser)}function m(a,b,c,d,e,g){var h=e.dataItem,i=a+"bg";if(h&&!k(h.uri)&&c[i]){var j=e.propertiesItem.fittingType,m=e.propertiesItem.alignType,n=l(j,m,h,g,d);b.custom[a]={},f.cacheCssImageMeasureData(b.custom[a],c[i],n.css.container,n.uri,d)}}function n(a,c,d,e,g,j){var n,m=a+"image";n=h.isOpen("designData")?g.designDataItem.background:g.dataItem.background;var o=i.getBgEffectName(g.behaviorsItem,e),p=j.width,q=j.height,r=i.getHeightByEffect(o,c,q),s=n.mediaRef;if(s&&"WixVideo"===s.type)s=s.posterImageRef;else if(!s||k(s.uri))return;var t=n.fittingType,u=n.alignType,v=l(t,u,s,{width:p,height:r},e);c.custom[a]={};var w=b.merge({height:r},v.css.container);f.cacheCssImageMeasureData(c.custom[a],d[m],w,v.uri,e)}function o(c,d,e,h,k,l){var m=c+j.IMAGE,n=m+"image",o=e[n]=a(e[m]).find("#"+n)[0],q=e[m].getAttribute("data-type");if(q===j.IMAGE)g.measureNodeImage(m,d,e);else{var r=i.getBgEffectName(l,h),s=i.getHeightByEffect(r,d,d.height[c]),t=p(c,k,"bg",d,s,h);d.custom[m]={};var u=b.assign({height:s},t.css.container);f.cacheCssImageMeasureData(d.custom[m],o,u,t.uri,h)}}function p(a,b,c,d,e){var f=c.width,g=d||c.height,h=s(a);if(h&&!k(h.uri)){var i=a.fittingType,j=a.alignType;return l(i,j,h,{width:f,height:g},e,b)}}function q(c,d,e,h,i,k,l,m){var n=d+"image",o=e[d].getAttribute("data-type"),q=r(i);if(o===j.IMAGE){var t={width:m.width,height:l},u=b.assign({displayMode:q.fittingType},s(q));g.patchNodeImage(d,e,h,k,u,t,q.alignType)}else{var v=e[n]||a(e[d]).find("#"+n)[0],w=p(q,"bg",m,l,k);h.custom[d]={};var x=b.assign({height:l},w.css.container);f.cacheCssImageMeasureData(h.custom[d],v,x,w.uri,k),f.patchCssImage(h.custom[d],n,e,k)}}function r(a){return h.isOpen("designData")?a.designDataItem.background:a.dataItem.background}function s(a){var b=a.mediaRef;return b&&"WixVideo"===b.type&&(b=b.posterImageRef),b}function t(a,b,c,d,e){var g=c.custom[a],h=a+"bg";g?f.patchCssImage(g,h,b,e):b[h]&&(b[h].style.backgroundImage="none")}var i=d.containerBackgroundUtils,j=d.balataConsts;return c.registerRequestToMeasureChildren("wysiwyg.viewer.components.background.bgImage",[["image"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.BgImageStrip",[["bg"]]),{measureLegacyBgImageStrip:m,measureBgImage:n,measureBgImageBalata:o,patchBgImage:q,patchLegacyBgImageStrip:t}}),define("layout/specificComponents/bgVideoLayout",["zepto","lodash","layout/util/layout","utils","imageClientApi","experiment"],function(a,b,c,d,e,f){"use strict";function i(a,c,d,e,f){var h={position:"relative",minWidth:0,minHeight:0,top:0,left:0},i=a.mediaRef;if(!i||"WixVideo"!==i.type||d.isTouchDevice())return h;var m=b.find(i.qualities,{quality:e}),n=j(c.width,c.height,m.width,m.height),o=k(a.fittingType,n,m.width,m.height),p=l(a.alignType,n,o,c);return h={position:"relative",minWidth:o.width,minHeight:o.height,left:p.left,top:g.isFullScreenByEffect(f,d)?"":p.top}}function j(a,b,c,d){return{wScale:a/c,hScale:b/d}}function k(a,b,c,d){var f,g,h,i=e.fittingTypes;switch(a){case i.SCALE_TO_FILL:h=Math.max(b.wScale,b.hScale),f=Math.round(c*h),g=Math.round(d*h);break;case i.SCALE_TO_FIT:h=Math.min(b.wScale,b.hScale),f=Math.round(c*h),g=Math.round(d*h)}return{width:f,height:g}}function l(a,b,c,d){var f=d.width,g=d.compRootHeight,h={},i=e.alignTypes;switch(a){case i.CENTER:h.left=b.wScale>=b.hScale?0:(f-c.width)/2,h.top=b.wScale<=b.hScale?0:(g-c.height)/2;break;case i.LEFT:h.left=0,h.top=b.wScale<=b.hScale?0:(g-c.height)/2;break;case i.RIGHT:h.left=f-c.width,h.top=b.wScale<=b.hScale?0:(g-c.height)/2;break;case i.TOP:h.left=b.wScale>=b.hScale?0:(f-c.width)/2,h.top=0;break;case i.BOTTOM:h.left=b.wScale>=b.hScale?0:(f-c.width)/2,h.top=Math.floor(g-c.height);break;case i.TOP_LEFT:h.left=0,h.top=0;break;case i.TOP_RIGHT:h.left=Math.floor(f-c.width),h.top=0;break;case i.BOTTOM_LEFT:h.left=0,h.top=Math.floor(g-c.height);break;case i.BOTTOM_RIGHT:h.left=Math.floor(f-c.width),h.top=Math.floor(g-c.height)}return h}function m(a,b,c){var e="";return b?d.urlUtils.joinURL(c.getStaticVideoUrl(),a.videoId,b,"mp4","file.mp4"):e}function n(a){return f.isOpen("designData")?a.designDataItem.background:a.dataItem.background}function o(b,c,d,e,f,h){var j=n(e),k=g.getBgEffectName(e.behaviorsItem,f),l=h.width,o=h.height,p=g.getHeightByEffect(k,d,o),q=c[b],r=q.children[0],s=r.children[0],t=q.getAttribute("data-quality"),u=i(j,{width:l,height:p,compRootHeight:o},f,t,k);a(r).attr("width",u.minWidth),a(r).attr("height",u.minHeight),a(r).css(u);var v=m(j.mediaRef,t,f);s.src!==v&&(s.src=v,r.load())}function p(b,c,d,e,f,j,k){var l=b+h.VIDEO,o=n(e),p=g.getBgEffectName(e.behaviorsItem,f),q=k.width,r=k.height,s=c[l],t=s.children[0],u=t.children[0],v=s.getAttribute("data-quality"),w=i(o,{width:q,height:j,compRootHeight:r},f,v,p);a(t).attr("width",w.minWidth),a(t).attr("height",w.minHeight),a(t).css(w);var x=m(o.mediaRef,v,f);u.src!==x&&(u.src=x,t.load())}var g=d.containerBackgroundUtils,h=d.balataConsts;return c.registerRequestToMeasureChildren("wysiwyg.viewer.components.background.bgVideo",[["video"]]),{patchBgVideo:f.isOpen("balata")?p:o}}),define("layout/specificComponents/balataLayout",["lodash","zepto","utils","layout/specificComponents/bgImageLayout","layout/specificComponents/bgVideoLayout","experiment"],function(a,b,c,d,e,f){"use strict";function i(b,c,d,e,f){var g=b[e][d];return a.isNumber(g)?g:(g=c[d][f],a.isNumber(g)?g:0)}function j(b,c,d,e,f,g){var h=p(b);r(d,b),d[h]&&(a.forEach(g,function(a,b){c[b][h]=a}),c.left[h]=i(c,d,h,"left","offsetLeft"),c.top[h]=i(c,d,h,"top","offsetTop"),k(h,c,d,e,f))}function k(a,b,c,e,f){var h=a+g.IMAGE,i=q(f),j=i.mediaRef;c[h]&&j&&d.measureBgImageBalata(a,b,c,e,i,f.behaviorsItem)}function l(a,c,d,e,f,i){var j=p(a),k=j+g.MEDIA,l=h.getBgEffectName(e.behaviorsItem,f),o=h.getHeightByEffect(l,d,i.height);c[j]&&(b(c[j]).css({overflow:"hidden",left:i.left,width:i.width,clip:"rect(0px,"+i.width+"px,"+i.height+"px,0px)"}),b(c[k]).css({width:i.width+"px",left:m(l,i,f),height:o+"px"}),n(j,c,d,e,f,o,i))}function m(a,b,c){return h.isFullScreenByEffect(a,c)?b.absoluteLeft||0:0}function n(a,b,c,f,h,i,j){var k=a+g.IMAGE,l=a+g.VIDEO,m=a+g.OVERLAY,n=q(f).mediaRef;b[k]&&n&&d.patchBgImage(a,k,b,c,f,h,i,j),b[l]&&n&&"WixVideo"===n.type&&e.patchBgVideo(a,b,c,f,h,i,j),b[m]&&o(m,b,i)}function o(a,c,d){var e=a+g.OVERLAY;b(c[e]).css({height:d})}function p(a){return a+g.BALATA}function q(a){return f.isOpen("designData")?a.designDataItem.background:a.dataItem.background}function r(a,c){var d=p(c),e=d+g.MEDIA,f=d+g.IMAGE,h=d+g.VIDEO,i=d+g.OVERLAY,j=i+g.OVERLAY,k=b(a[d]),l=a[e]=b(k).find("#"+e)[0],m=b(l);a[f]=m.find("#"+f)[0],a[h]=m.find("#"+h)[0],a[i]=m.find("#"+i)[0],a[j]=m.find("#"+j)[0]}function s(a,b){var c=p(a);return{width:b.width[c],height:b.height[c],left:b.left[c],top:b.top[c]}}var g=c.balataConsts,h=c.containerBackgroundUtils;return{getBalataMeasurements:s,measure:j,patch:l}}),define("layout/specificComponents/containerAndScreenWidthLayout",["lodash","zepto","experiment","layout/util/layout","utils","layout/util/rootLayoutUtils","layout/util/calculateScreenWidthDimensions","layout/specificComponents/bgImageLayout","layout/specificComponents/bgVideoLayout","layout/specificComponents/balataLayout"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function n(a,b,c){b.height[a]=c[a].offsetHeight,t(a,b,c)}function o(a){return a.isMobileView()?"mobile":"desktop"}function p(b,c){return a.get(b.propertiesItem,[o(c),"popup","showOverlay"],!1)}function q(b,c){return a.get(b.dataItem,["pageBackgrounds",o(c),"ref"])}function r(b,d,f,g,h){n(b,d,f);var i=e.layout.getPageBottomChildEnd(d,f,g,h)+d.containerHeightMargin[b],j=g.getPageMinHeight(),k=a.get(h,["propertiesItem",g.isMobileView()?"mobile":"desktop"]);if(m&&k&&k.minHeight&&(j=k.minHeight),d.pageBottomByComponents[b]=i,d.minHeight[b]=j,d.height[b]=Math.max(j,i),c.isOpen("sv_popups")&&h.dataItem.isPopup&&p(h,g)){var o={background:q(h,g)},r=a.clone(h);r.id+=l,c.isOpen("designData")?r.designDataItem=o:r.dataItem=o,d.top[b]=0,v(b,d,f,g,r)}}function s(a,b,c){var d=b.height[a+"inlineContent"]||0;b.containerHeightMargin[a]=d?c[a].offsetHeight-d:0}function t(a,b,c){b.left[a]=0,s(a,b,c)}function u(a,b,c,d,e,f){var g=a+"image";c[g]&&N(e).mediaRef&&h.measureBgImage(g,b,c,d,e,f)}function v(a,b,c,d,g){if(t(a,b,c),N(g)){var h=e.layout.stretchInCenteredContainer(f.getRootWidth(d,b,"masterPage"),f.getLayerWidth(d,b,g.rootId));b.width[a]=h.width,b.height[a]=b.height.screen-d.getPageBottomMargin()-1,j.measure(a,b,c,d,g,{width:h.width,left:h.left,height:b.height[a]})}}function w(a,b,d,h,i){if(t(a,b,d),N(i))if(c.isOpen("balata")){var k=g(b,h,i.rootId);b.width[a]=k.width;var l={width:k.width,left:k.left,height:b.height[a]};j.measure(a,b,d,h,i,l)}else{var m=g(b,h,i.rootId),n={width:m.width,height:b.height[a]},o={width:n.width+"px",height:n.height+"px",left:m.left+"px",overflow:"hidden",clip:"rect(0px,"+m.width+"px,"+b.height[a]+"px,"+m.left+"px)"},p=e.containerBackgroundUtils,q=p.getBgEffectName(i.structure.behaviors,h),r=p.getHeightByEffect(q,b,n.height),s={width:m.width+"px",left:0,height:r+"px"};b.width[a]=f.getRootWidth(h,b,i.rootId),b.custom[a]={dimensions:n,backgroundStyle:o,backgroundMediaStyle:s},u(a,b,d,h,i,n)}}function x(a,b,c,d,e){b.custom[a]={isFixedPosition:e.layout.fixedPosition},t(a,b,c)}function y(a,c){b(c[a]).css({left:0})}function z(a,c,d,e,g,h){var i=f.getLayerWidth(g,d,e.rootId);b(c[h]).css({width:i,left:L(e.layout.width,i,g)}),y(a,c,d)}function A(a,b,c,d,e){var f=a+"screenWidthBackground";z(a,b,c,d,e,f)}function B(a,c,d){t(a,c,d);var e=b(d[a+"navigationArrows"]);c.custom[a]={offset:parseInt(e.attr("data-navigation-button-margin"),10)}}function C(a,c,d,e,f){var g=b(d[a]),h=g.attr("data-parent-id");c.minHeight[a]=c.height[h],c.height[a]=c.height[h],w(a,c,d,e,f)}function D(a,c,d,e,h){var i=a+"inlineContent",j=i+"Parent",k=g(d,e,h.rootId);b(c[j]).css({left:k.left,width:k.width}),b(c[i]).css({left:-1*k.left,width:f.getRootWidth(e,d,h.rootId)})}function E(a,b,c,d,e){D(a,b,c,e,d)}function F(a,c,d,e,g){y(a,c,d),D(a,c,d,g,e);var h=f.getLayerWidth(g,d,e.rootId),i=L(e.layout.width,h,g)+d.custom[a].offset;b(c[a+"prevButton"]).css({left:i}),b(c[a+"nextButton"]).css({right:i})}function G(d,e,f,g,h){if(b(e[d]).css({visibility:""}),c.isOpen("sv_popups")&&g.dataItem.isPopup&&p(g,h)){var i=d+l,j=a.defaultsDeep({id:i,rootId:"masterPage",structure:{behaviors:[]}},g),k=q(g,h);c.isOpen("designData")?j.designDataItem={background:k}:j.dataItem={background:k},H(d,e,f,j,h,{height:f.height[d+"balata"]}),b(e[i]).css("height",f.height[i])}}function H(d,e,h,i,k,l){if(N(i)){if(!c.isOpen("balata")){var m=d+"background",n=d+"backgroundMedia";b(e[m]).css(h.custom[d].backgroundStyle),b(e[n]).css(h.custom[d].backgroundMediaStyle),b(e[d]).css({width:h.width[d]})}y(d,e,h);var o=g(h,k,i.rootId),p=a.assign({top:0,left:o.left,width:o.width,height:h.height[d],absoluteLeft:0},l);c.isOpen("balata")?(b(e[d]).css({width:f.getRootWidth(k,h,i.rootId)}),j.patch(d,e,h,i,k,p)):I(d,e,h,i,k,p)}}function I(a,c,d,f,g,j){var k=a+"image",l=a+"video",m=a+"overlay",n=e.containerBackgroundUtils,o=n.getBgEffectName(f.behaviorsItem,g),p=n.getHeightByEffect(o,d,j.height),q=N(f).mediaRef;if(c[k]&&q&&h.patchBgImage(a,k,c,d,f,g,p,j),c[l]&&q&&"WixVideo"===q.type&&i.patchBgVideo(l,c,d,f,g,j),c[m]){var r=m+"overlay";b(c[r]).css({height:p})}}function J(a,b,c,d,e){var f=g(b,d,e.rootId);if(b.width[a]=f.width,b.left[a]=f.left,e.dataItem&&"Image"===e.dataItem.type){var i={width:f.width,height:b.height[a]};h.measureLegacyBgImageStrip(a,b,c,d,e,i)}}function K(a,c,d,e,f){b(c[a]).css({width:d.width[a]+"px",left:d.left[a]+"px"}),h.patchLegacyBgImageStrip(a,c,d,e,f)}function L(a,b,c){return c.isMobileView()||c.isMobileDevice()?0:Math.min(parseInt(Math.floor((a-b)/2),10),0)}function M(a,c,d,e){var f=e.layout&&e.layout.fixedPosition,g={height:d.height[a],bottom:f?d.siteMarginBottom:"auto",top:f?"auto":d.top[a]};b(c[a]).css(g)}function N(a){return c.isOpen("designData")?a.designDataItem.background:a.dataItem.background}var k=e.balataConsts,l=k.BALATA,m=c.isOpen("sv_minPH");d.registerRequestToMeasureDom("mobile.core.components.Container"),d.registerRequestToMeasureDom("mobile.core.components.Page"),d.registerRequestToMeasureDom("wixapps.integration.components.AppPage"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.FooterContainer"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.HeaderContainer"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.ScreenWidthContainer"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShow"),
d.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainer"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.StripColumnsContainer"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.Column"),d.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShowSlide"),d.registerMeasureChildrenFirst("mobile.core.components.Page",!0),d.registerMeasureChildrenFirst("wixapps.integration.components.AppPage",!0),d.registerRequestToMeasureChildren("mobile.core.components.Container",[["inlineContent"]]),d.registerRequestToMeasureChildren("mobile.core.components.Page",function(a,b,c,d){return d.dataItem.isPopup?[["inlineContent"],[l]]:[["inlineContent"]]}),d.registerRequestToMeasureChildren("wixapps.integration.components.AppPage",[["inlineContent"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.FooterContainer",[["screenWidthBackground"],["inlineContent"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.PagesContainer",[["screenWidthBackground"],["inlineContent"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.HeaderContainer",[["screenWidthBackground"],["inlineContent"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.ScreenWidthContainer",[["screenWidthBackground"],["inlineContent"]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShow",[["background"],["inlineContentParent"],["inlineContent"],["shownOnAllSlides"],["navigationArrows"],["prevButton"],["nextButton"]]);var O=[["background"],["backgroundMedia"],{pathArray:["image"],type:"wysiwyg.viewer.components.background.bgImage"},{pathArray:["video"],type:"wysiwyg.viewer.components.background.bgVideo"},{pathArray:["overlay"],type:"wysiwyg.viewer.components.background.bgOverlay"},["inlineContent"],["image","image"],["video","video"],["overlay","overlay"]];return c.isOpen("balata")?(d.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainer",[["inlineContent"],[k.BALATA]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShowSlide",[["inlineContentParent"],["inlineContent"],[k.BALATA]])):(d.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainer",O),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShowSlide",O.concat([["inlineContentParent"]]))),d.registerCustomMeasure("mobile.core.components.Container",s),d.registerCustomMeasure("mobile.core.components.Page",r),d.registerCustomMeasure("wixapps.integration.components.AppPage",r),d.registerCustomMeasure("wysiwyg.viewer.components.FooterContainer",x),d.registerCustomMeasure("wysiwyg.viewer.components.PagesContainer",n),d.registerCustomMeasure("wysiwyg.viewer.components.HeaderContainer",x),d.registerCustomMeasure("wysiwyg.viewer.components.ScreenWidthContainer",t),d.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShow",B),d.registerCustomMeasure("wysiwyg.viewer.components.StripContainer",w),d.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShowSlide",C),d.registerCustomMeasure("wysiwyg.viewer.components.BgImageStrip",J),d.registerPatchers("wysiwyg.viewer.components.FooterContainer",[A,M]),d.registerPatcher("wysiwyg.viewer.components.HeaderContainer",A),d.registerPatcher("mobile.core.components.Page",G),d.registerPatcher("wysiwyg.viewer.components.PagesContainer",A),d.registerPatcher("wysiwyg.viewer.components.ScreenWidthContainer",A),d.registerPatcher("wysiwyg.viewer.components.StripContainerSlideShow",F),d.registerPatcher("wysiwyg.viewer.components.StripContainer",H),d.registerPatchers("wysiwyg.viewer.components.StripContainerSlideShowSlide",[E,H]),d.registerPatcher("wysiwyg.viewer.components.BgImageStrip",K),{measureContainer:s,measureStripContainer:w,patchStripContainer:H}}),define("layout/specificComponents/groupLayout",["lodash","zepto","layout/util/layout","utils"],function(a,b,c,d){"use strict";function e(b,c,e,g,h){var i=d.dataUtils.getChildrenData(h.structure,g.isMobileView()),j=f(i,c);c.left[b]=h.layout.x,i.length>0&&(c.width[b]=j.right-j.left,c.height[b]=j.bottom-j.top,c.top[b]=h.layout.y+j.top,c.left[b]=h.layout.x+j.left,a.forEach(i,function(a){c.top[a.id]=a.layout.y-j.top,c.left[a.id]=a.layout.x-j.left}))}function f(b,c){var e,f,g,h;return e=g=Number.MAX_VALUE,f=h=-Number.MAX_VALUE,a.forEach(b,function(a){var b=a.layout,i=c.left&&c.left[a.id]?c.left[a.id]:b.x,j=c.width&&c.width[a.id]?c.width[a.id]:b.width,k=c.top&&c.top[a.id]?c.top[a.id]:b.y,l=c.height&&c.height[a.id]?c.height[a.id]:b.height,m=d.boundingLayout.getBoundingLayout({x:i,y:k,width:j,height:l,rotationInDegrees:b.rotationInDegrees});e=Math.min(e,m.x),f=Math.max(f,m.x+m.width),g=Math.min(g,m.y),h=Math.max(h,m.y+m.height)}),{left:e,right:f,top:g,bottom:h}}function g(c,e,f,g,h){b(e[c]).css({width:f.width[c],height:f.height[c],top:f.top[c],left:f.left[c]});var i=d.dataUtils.getChildrenData(g.structure,h.isMobileView());a.forEach(i,function(a){b(e[a.id]).css({top:f.top[a.id],left:f.left[a.id]})})}c.registerMeasureChildrenFirst("wysiwyg.viewer.components.Group",!0),c.registerRequestToMeasureDom("wysiwyg.viewer.components.Group"),c.registerCustomMeasure("wysiwyg.viewer.components.Group",e),c.registerPatcher("wysiwyg.viewer.components.Group",g)}),define("layout/wixappsLayout/proxyLayoutRegistrar",[],function(){"use strict";var a={};return{registerCustomMeasure:function(b,c){a[b]=c},getProxiesToMeasure:function(){return a}}}),define("layout/specificComponents/wixappsLayout",["zepto","lodash","utils","layout/wixappsLayout/proxyLayoutRegistrar","layout/util/layout","layout/util/singleCompLayout","experiment"],function(a,b,c,d,e,f,g){"use strict";function k(a,b,c,d){try{var e={type:40,desc:c.description,eventId:c.eventId,adapter:"ugc-viewer",category:2,reportType:"event",packageName:"blog",params:c.params||{},src:42};d=d||{},h.reportBI(b,e,d)}catch(f){}this.lastBIEvent=this.lastBIEvent||a}function m(){var c=b.toArray(arguments).join("");return a("#"+c)[0]}function n(a,b,c){return c.custom[a]&&c.custom[a].appPartShouldRenderAgain}function o(a,b,c,d){f.measureComponentChildren(a,m,d,c,b)}function p(a,b,c,d){var e=a.compId,g=m(e);b[e]=g;var h=a.structureInfo;h.id=e,h.type=a.compType,o(h,d,b,c),f.maps.classBasedCustomMeasures[a.compType]&&f.maps.classBasedCustomMeasures[a.compType](e,c,b,d,a.structureInfo)}function q(a,b,d){var e=a+l;c.stringUtils.isTrue(d[a].getAttribute("data-dynamic-height"))&&"loading"!==d[a].attributes["data-state"].value&&(b.height[a]=b.height[e],b.minHeight[a]=b.height[e])}function r(a,c,e,f,h){j[a.id]=b.now(),g.isOpen("wixappsPerformanceMeasuring")&&a.dataItem&&!h.rendererModel.previewMode&&k.call(this,!1,h,i.APP_PART_BEFORE_LAYOUT,{component_id:a.dataItem.appPartName,visitor_id:h.rendererModel&&h.rendererModel.userId});var m=a.id,n=m+l,o=c.querySelector("#"+n);e.custom[m]=e.custom[m]||{};var q=!1;return b.forEach(d.getProxiesToMeasure(),function(a,c){var d=u(c,o);e.custom[m][c]=e.custom[m][c]||[],b.forEach(d,function(b,d){var g=a(b,h,e);e.custom[m][c][d]=g,g.comp&&p(g.comp,f,e,h),g.needsRelayout&&!e.custom[m][c][d].didRelayout&&(q=!0,e.custom[m][c][d].didRelayout=!0)})}),q}function s(a,c,e,h){var l=a.id;c.custom[l].appPartShouldRenderAgain=b.reduce(d.getProxiesToMeasure(),function(a,d,g){var i=c.custom[l][g],j=b.reduce(i,function(a,b){t(b.domManipulations);var d=!1,g=b.comp;return g&&(d=f.patchComponent(g.structureInfo,e,c,h)),a||d},!1);return a||j},!1),g.isOpen("wixappsPerformanceMeasuring")&&a.dataItem&&!h.rendererModel.previewMode&&k.call(this,!0,h,i.APP_PART_AFTER_LAYOUT,{component_id:a.dataItem.appPartName,visitor_id:h.rendererModel&&h.rendererModel.userId,loading_time:b.now()-j[a.id]}),j[a.id]=null}function t(c){b.forEach(c,function(c){var d=a(c.node),e=c.funcName,f=b.isArray(c.params)?c.params:[c.params];b.isFunction(d[e])&&d[e].apply(d,f)})}function u(b,c){return a("[data-proxy-name="+b+"]",c)}var h=c.logger,i={APP_PART_BEFORE_LAYOUT:{eventId:365,desc:"wixapps - layout started",params:{c2:"component_id",g2:"visitor_id"}},APP_PART_AFTER_LAYOUT:{eventId:366,desc:"wixapps - layout complete",params:{c2:"component_id",g2:"visitor_id",loading_time:"loading_time"}}},j={},l="inlineContent";return e.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart",r,s),e.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart2",r,s),e.registerRequestToMeasureChildren("wixapps.integration.components.AppPart",[[l]]),e.registerRequestToMeasureDom("wixapps.integration.components.AppPart"),e.registerCustomMeasure("wixapps.integration.components.AppPart",q),e.registerPatcher("wixapps.integration.components.AppPart",n),e.registerRequestToMeasureChildren("wixapps.integration.components.AppPart2",[[l]]),e.registerRequestToMeasureDom("wixapps.integration.components.AppPart2"),e.registerCustomMeasure("wixapps.integration.components.AppPart2",q),e.registerPatcher("wixapps.integration.components.AppPart2",n),{appPartMeasureFunction:q,appPartPatcherFunction:n,inlineContentId:l,preMeasureProxies:r,postPatchProxies:s}}),define("layout/specificComponents/svgShape/svgScalerUtils",[],function(){"use strict";return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},round:function(a){return Math.round(1e6*a)/1e6}}}),define("layout/specificComponents/svgShape/svgPathParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(a,b){"use strict";return{getParsedPath:function(c){var d=b.trim(c);if(""===d)return[];var e=d.match(/[a-z][^a-z]*/gi),f=e.map(function(c){for(c=c.replace(/-/g," -").replace(/,/g," ");a.includes(c,"  ");)c=c.replace(/ {2}/g," ");return[c.substring(0,1),b.trim(c.substring(1))]});return f.map(function(b){var c,d=[];return a.includes("QSCL",b[0].toUpperCase())&&1===b[1].split(",").length?(c=b[1].split(" "),c.length%2!==0?b:(c.forEach(function(a,b,c){b%2===0&&d.push(a+" "+c[b+1])}),[b[0],d.join(",")])):b})},stringifyParsedPath:function(a){var b="";return a.forEach(function(a){a.forEach(function(a){b+=a})}),b}}}),define("layout/specificComponents/svgShape/svgBasicScaler",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";var b=function(b,c){return a.round(parseFloat(b)*c)},c=function(a,c,d){var e=a.split(/[\s,]+/);return b(e[0],c)+" "+b(e[1],d)},d=function(b,d,e){if(""===b)return"";var f=b.split(",").map(function(b){return c(a.trim(b),d,e)});return f.join(",")};return{scaleSingleValue:b,scalePairString:c,scaleMultiplePairStrings:d}}),define("layout/specificComponents/svgShape/svgPathScaler",["lodash","layout/specificComponents/svgShape/svgPathParser","layout/specificComponents/svgShape/svgBasicScaler","utils"],function(a,b,c,d){"use strict";var e=function(){return""},f=function(a,b,d){return c.scaleSingleValue(a,d/(360*b))},g=function(a,b,e){var g=a.split(/[\s,]+/);return 7!==g.length?(d.log.verbose("incorrect arc string, should have exactly 7 parameters. (value was "+a),a):(g[0]=c.scaleSingleValue(g[0],b),g[1]=c.scaleSingleValue(g[1],e),g[2]=f(g[2],b,e),g[5]=c.scaleSingleValue(g[5],b),g[6]=c.scaleSingleValue(g[6],e),g.join(" "))},h=function(c,d,e){var f=b.getParsedPath(c.getAttribute("d"));a.forEach(f,function(a){var b=[a[1]],c=a[0].toUpperCase();"V"===c?b.push(e):"H"===c?b.push(d):(b.push(d),b.push(e)),a[1]=i[a[0].toUpperCase()].apply(null,b)}),c.setAttribute("d",b.stringifyParsedPath(f))},i={M:c.scalePairString,L:c.scaleMultiplePairStrings,H:c.scaleSingleValue,V:c.scaleSingleValue,Z:e,C:c.scaleMultiplePairStrings,S:c.scaleMultiplePairStrings,Q:c.scaleMultiplePairStrings,T:c.scalePairString,A:g};return{scale:h}}),define("layout/specificComponents/svgShape/svgPolygonParser",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";return{getParsedPoints:function(b){var f,c=a.trim(b),d=c.split(/[\s,]+/),e=[];if(""===c)return[];for(f=0;f<d.length;f+=2)e.push([d[f],d[f+1]]);return e},stringifyPoints:function(b){var c="";return b.forEach(function(a){c+=a.join(",")+" "}),a.trim(c)}}}),define("layout/specificComponents/svgShape/svgPolygonScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolygonParser"],function(a,b,c){"use strict";return{scale:function(d,e,f){var g=c.getParsedPoints(d.getAttribute("points"));a.forEach(g,function(a){a[0]=b.scaleSingleValue(a[0],e),a[1]=b.scaleSingleValue(a[1],f)}),d.setAttribute("points",c.stringifyPoints(g))}}}),define("layout/specificComponents/svgShape/svgCircleScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("cx"),f=b.getAttribute("cy"),g=b.getAttribute("r"),h=Math.min(c,d);e&&f&&(b.setAttribute("cx",a.scaleSingleValue(e,h)),b.setAttribute("cy",a.scaleSingleValue(f,h)),b.setAttribute("r",a.scaleSingleValue(g,h)))}}}),define("layout/specificComponents/svgShape/svgRectScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";var b=function(b,c,d,e){d&&b.setAttribute(c,a.scaleSingleValue(d,e))};return{scale:function(a,c,d){var e=a.getAttribute("width"),f=a.getAttribute("height"),g=a.getAttribute("rx"),h=a.getAttribute("ry"),i=a.getAttribute("x"),j=a.getAttribute("y");b(a,"width",e,c),b(a,"height",f,d),b(a,"rx",g,c),b(a,"ry",h,d),b(a,"x",i,c),b(a,"y",j,d)}}}),define("layout/specificComponents/svgShape/svgEllipseScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("cx"),f=b.getAttribute("cy"),g=b.getAttribute("rx"),h=b.getAttribute("ry");e&&g&&(b.setAttribute("cx",a.scaleSingleValue(e,c)),b.setAttribute("rx",a.scaleSingleValue(g,c))),f&&h&&(b.setAttribute("cy",a.scaleSingleValue(f,d)),b.setAttribute("ry",a.scaleSingleValue(h,d)))}}}),define("layout/specificComponents/svgShape/svgPolylineParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(a,b){"use strict";return{getParsedPoints:function(a){var f,c=b.trim(a),d=c.split(/[\s,]+/),e=[];if(""===c)return[];for(f=0;f<d.length;f+=2)e.push([d[f],d[f+1]]);return e},stringifyPoints:function(a){var c="";return a.forEach(function(a){c+=a.join(",")+" "}),b.trim(c)}}}),define("layout/specificComponents/svgShape/svgPolylineScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolylineParser"],function(a,b,c){"use strict";return{scale:function(d,e,f){var g=c.getParsedPoints(d.getAttribute("points"));g=a.map(g,function(c){return a.map(c,function(a,c){return b.scaleSingleValue(a,c?f:e)})}),d.setAttribute("points",c.stringifyPoints(g))}}}),define("layout/specificComponents/svgShape/svgLineScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("x1"),f=b.getAttribute("y1"),g=b.getAttribute("x2"),h=b.getAttribute("y2");e&&f&&g&&h&&(b.setAttribute("x1",a.scaleSingleValue(e,c)),b.setAttribute("x2",a.scaleSingleValue(g,c)),b.setAttribute("y1",a.scaleSingleValue(f,d)),b.setAttribute("y2",a.scaleSingleValue(h,d)))}}}),define("layout/specificComponents/svgShape/svgScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgPathScaler","layout/specificComponents/svgShape/svgPolygonScaler","layout/specificComponents/svgShape/svgCircleScaler","layout/specificComponents/svgShape/svgRectScaler","layout/specificComponents/svgShape/svgEllipseScaler","layout/specificComponents/svgShape/svgPolylineScaler","layout/specificComponents/svgShape/svgLineScaler"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(b){return a.includes(["path","polygon","rect","circle","ellipse","polyline","line"],b.toLowerCase())},k=function(a,c,d,e){var g,h,k,l,f=c.width/c.height,i=f>e,j=e>f;return a.width?d&&i?(k=c.height*e,g=k/a.width):g=c.width/a.width:g=1,a.height?d&&j?(l=c.width/e,h=l/a.height):h=c.height/a.height:h=1,{scaleX:b.round(g),scaleY:b.round(h)}},l=function(a,b,c){return Math.abs(a.width-b.width)<c&&Math.abs(a.height-b.height)<c},m=function(a,b,c){a.setAttribute("transform","translate("+parseFloat(-1*c.x+.5*b)+","+parseFloat(-1*c.y+.5*b)+")")},n=function(a){var b=a.getAttribute("data-original-aspect-ratio");return b?Number(b):null},o=function(a,b){a.hasAttribute("data-original-aspect-ratio")||(a.setAttribute("data-original-aspect-ratio",b),a.setAttribute("viewBox",""),a.removeAttribute("viewBox"))},p=function(b,p,q,r,s){var t=b.getElementsByTagName("g")[0],u=a.pick(q,["width","height"]),v=u.width/u.height,w=a.pick(q,["x","y"]),x={path:c,polygon:d,rect:f,circle:e,ellipse:g,polyline:h,line:i},y=n(b);if(y||(y=q.width/q.height,o(b,y)),!l(p,u,1)||s&&v!==y){var z=k(u,p,s,y);a(t.childNodes).filter(function(a){return j(a.nodeName)}).forEach(function(a){var b=a.nodeName.toLowerCase();x[b].scale(a,z.scaleX,z.scaleY)}).commit(),m(t,r,{x:w.x*z.scaleX,y:w.y*z.scaleY}),b.style.width=Math.ceil(u.width*z.scaleX+r)+"px",b.style.height=Math.ceil(u.height*z.scaleY+r)+"px"}};return{scale:p}}),define("layout/specificComponents/shapeLayout",["lodash","experiment","layout/util/layout","layout/specificComponents/svgShape/svgScaler"],function(a,b,c,d){"use strict";function e(a,b,c){var d=c.width/c.height;a.shapesOriginalAspectRatio=a.shapesOriginalAspectRatio||{},a.shapesOriginalAspectRatio[b]=a.shapesOriginalAspectRatio[b]||d}function f(a,b,c,d){var f=c[a];f&&f.getElementsByTagName||(c[a]=f=document.createElementNS("http://www.w3.org/2000/svg","svg"));var g=f.getElementsByTagName("svg")[0];if(g){var j,h=Array.prototype.slice.call(g.childNodes),i=h.filter(function(a){return"g"===a.tagName});1===i.length?j=i[0]:(j=document.createElementNS("http://www.w3.org/2000/svg","g"),h.forEach(function(a){j.appendChild(a)}),g.appendChild(j));var k=j.getBBox();b.custom[a]=k,e(d,a,k)}}function g(a,b,c,e){var f=b[a].getElementsByTagName("svg")[0];if(f){var g=e.propertiesItem,h=g&&g.maintainAspectRatio,i=e.styleItem,j=parseInt(i&&i.style?i.style.properties.strokewidth||1:1,10),k={width:c.width[a]-j,height:c.height[a]-j};d.scale(f,k,c.custom[a],j,h)}}return c.registerCustomMeasure("wysiwyg.viewer.components.svgshape.SvgShape",f),c.registerPatcher("wysiwyg.viewer.components.svgshape.SvgShape",g),b.isOpen("sv_popups")&&(c.registerCustomMeasure("wysiwyg.viewer.components.PopupCloseIconButton",f),c.registerPatcher("wysiwyg.viewer.components.PopupCloseIconButton",g)),{}}),define("layout/specificComponents/richtextLayout",["layout/util/layout","experiment"],function(a,b){"use strict";function d(a,b){var c=b[a];c&&(c.style.height="")}var c="wysiwyg.viewer.components.WRichText";return a.registerPatcher(c,d),a.registerCustomMeasure(c,function(a,c,d,e,f){var g=d[a];c.minHeight[a]=g.offsetHeight,b.isOpen("sv_packText")&&f.propertiesItem&&f.propertiesItem.packed&&(c.height[a]=g.offsetHeight)}),a.registerRequestToMeasureDom(c),{}}),define("layout/specificComponents/matrixGalleryLayout",["layout/util/layout","zepto","utils","imageClientApi","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f){"use strict";function l(a,c,d,e,f){var g=b(f);return i.getSizeAfterScaling({itemHeight:c,itemWidth:d,displayerData:a,imageMode:e.imageMode,heightDiff:parseInt(g.attr("data-height-diff"),10)||0,widthDiff:parseInt(g.attr("data-width-diff"),10)||0,bottomGap:parseInt(g.attr("data-bottom-gap"),10)||0})}function m(a,b,c){h.measureFlexibleHeightGallery(a,b,c),b.width[a]=Math.max(k,b.width[a]),b.height[a]=Math.max(j,b.height[a])}function n(a,c,i,j,k){var m=b(c[a]),n=j.propertiesItem,o=i.height[a],p=i.width[a],q=b(c[a+"itemsContainer"]),r=parseInt(b(c[a]).attr("data-presented-row"),10),s=i.custom[a]||[],t=g.getItemWidth(n.margin,n.numCols,p,parseInt(b(c[a]).attr("data-width-diff"),10)||0),u=g.getItemHeight(n.margin,o,r,parseInt(b(c[a]).attr("data-height-diff"),10)||0),v=j.dataItem.items;q.css({height:o,width:p}),m.css({height:o,width:p}),e.forEach(s,function(j,m){var o=j.data,p=e.defaults({displayMode:d.fittingTypes.SCALE_TO_FILL},v[o.imageIndex]),q=l(p,u,t,n,j.node),r=h.getContainerSize(q.imageWrapperSize,j.node),s=g.getItemPosition(m,t,u,n.margin,n.numCols);b(j.node).css({height:q.displayerSize.height,width:q.displayerSize.width,left:s.left,top:s.top}),h.updateImageWrapperSizes(j.node.firstChild,q),f.patchNodeImage(a+j.node.id+"image",c,i,k,p,r)})}function o(a,c){var d=[["itemsContainer"]],f=b("#"+c+"itemsContainer").children();return e.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"};d.push(b)}),d}var g=c.matrixCalculations,h=c.galleriesCommonLayout,i=c.matrixScalingCalculations,j=70,k=45;return a.registerRequestToMeasureDom("wysiwyg.viewer.components.MatrixGallery"),a.registerCustomMeasure("wysiwyg.viewer.components.MatrixGallery",m),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.MatrixGallery",o),a.registerPatcher("wysiwyg.viewer.components.MatrixGallery",n),{}}),define("layout/specificComponents/slideShowLayout",["layout/util/layout","zepto","utils","imageClientApi","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f){"use strict";function i(a,b,c,d,e,f){return g.getSizeAfterScaling({itemHeight:b-(parseInt(e.attr("data-height-diff"),10)||0),itemWidth:c-(parseInt(e.attr("data-height-diff"),10)||0),displayerData:a,imageMode:d.imageMode,heightDiff:parseInt(f.attr("data-height-diff"),10)||0,widthDiff:parseInt(f.attr("data-width-diff"),10)||0,bottomGap:parseInt(f.attr("data-bottom-gap"),10)||0})}function j(a,b,c){h.measureFlexibleHeightGallery(a,b,c)}function k(a,c,d,g,j){var k=g.propertiesItem,m=d.height[a],n=d.width[a],o=j.isMobileDevice()||j.isMobileView(),p=d.custom[a];if(!e.isEmpty(p)){var q=b(c[a+"border"]),r=b(c[a]);if("flexibleHeight"===k.imageMode){var s=e.last(p),t=b(s.node),u=s.data,v=i(l(g,u),m,n,k,r,t);m=v.displayerSize.height}r.css({height:m,width:n}),q.css({height:m,width:n}),e.forEach(p,function(e){var p=b(e.node),q=e.data,r=l(g,q);p.css({height:m,width:n});var s=i(r,m,n,k,b(c[a]),p);h.updateImageWrapperSizes(b(p.children()[0]),s),f.patchNodeImage(a+p[0].id+"image",c,d,j,r,h.getContainerSize(s.imageWrapperSize,p),o)})}}function l(a,b){var c=a.dataItem.items,f=b.imageIndex;return e.defaults({displayMode:d.fittingTypes.SCALE_TO_FILL},c[f])}function m(a,c){var d=[["border"],["itemsContainer"]],f=b("#"+c+"itemsContainer").children();return e.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"};d.push(b)}),d}var g=c.matrixScalingCalculations,h=c.galleriesCommonLayout;return a.registerRequestToMeasureDom("wysiwyg.viewer.components.SlideShowGallery"),a.registerCustomMeasure("wysiwyg.viewer.components.SlideShowGallery",j),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.SlideShowGallery",m),a.registerPatcher("wysiwyg.viewer.components.SlideShowGallery",k),{}}),define("layout/specificComponents/anchorLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){var c=b[a];c&&(c.style.width="0px")}a.registerPatcher("wysiwyg.common.components.anchor.viewer.Anchor",b)}),define("layout/specificComponents/tinyMenuLayout",["zepto","layout/util/layout","utils","layout/util/rootLayoutUtils","lodash"],function(a,b,c,d,e){"use strict";function k(b,c,g,h,k){var n,o,l=d.getRootWidth(k,g,h.rootId),m=l-2*i;h.layout.fixedPosition?(o="calc(50% + "+(h.layout.x-l/2)+"px)",n=-h.layout.x+i):(o=h.layout.x+"px",n=-g.custom[b].menuContainerLeft),a(c[b]).css({left:o}),e.get(h,["styleItem","skin"],j)===j&&a(c[b+f]).css({width:m+"px",left:n+"px"})}function l(b,d,e){var f=a("#SITE_ROOT")[0],j=c.domMeasurements.getBoundingRect(e[b],f);d.custom[b]={menuContainerTop:j.bottom,menuContainerLeft:j.left-i},d.height[b]=d.height[b+g];var k=/_open\b/.test(e[b+g].className);if(k){var l=c.domMeasurements.getElementRect(e[b+h],f);d.minHeight.SITE_STRUCTURE=Math.max(d.minHeight.SITE_STRUCTURE||0,l.bottom)}}var f="menuContainer",g="menuButton",h="menuItems",i=20,j="wysiwyg.viewer.skins.mobile.TinyMenuSkin";b.registerRequestToMeasureChildren("wysiwyg.viewer.components.mobile.TinyMenu",[[f],[g],[h]]),b.registerCustomMeasure("wysiwyg.viewer.components.mobile.TinyMenu",l),b.registerPatcher("wysiwyg.viewer.components.mobile.TinyMenu",k)}),define("layout/specificComponents/imageZoomLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/imageLayout","utils","imageClientApi"],function(a,b,c,d,e,f){"use strict";function h(a){return a.dataItem||a.structure.compData}function i(a,b){return e.nonPageItemZoom.getZoomedImageData()||a.getDataByQuery(b)}function j(a){var b=e.nonPageItemZoom.getZoomedImageData();return a.getExistingRootNavigationInfo(a.getFocusedRootId()).pageItemId||b&&b.id}function k(c,e,g,h,k){var l=j(k),m=!k.isMobileView()&&k.isMobileDevice()||k.isTabletDevice(),n=i(k,l),o=a.defaults({displayMode:f.fittingTypes.LEGACY_FULL},n);o.quality=a.defaults({quality:90},o.quality||{});var p=g.custom[c],q={width:p.imageContainerWidth,height:p.imageContainerHeight};d.patchNodeImage(c+l+"image",e,g,k,o,q);var r=b(e[c+n.id+"panel"]);if(r&&r.length>0){var s=m?p.dialogBoxWidth:q.width;r.css({width:s})}}function l(a,c,d,e,f){var g=d.custom[a];b(c[a+"dialogBox"]).css({width:g.imageContainerWidth,minHeight:g.dialogBoxHeight,paddingTop:g.paddingTop}),k(a,c,d,e,f);var h=j(f),i=b(c[a+h+"description"]),l=b(c[a+h+"ellipsis"]);g.showDescription&&g.descriptionHeight>g.descriptionHeightLimit&&(i.height(g.descriptionHeightLimit),l.show(),i.data("expandable","true"))}function m(a,c,d,e){var f=j(e),h=i(e,f),k=!e.isMobileView()&&e.isMobileDevice()||e.isTabletDevice(),l=k?g.getNonOptimizedViewDimensions:g.getDesktopViewDimensions,m=b(d[a]),o=b(d[a+"dialogBox"]),p=n(o);c.custom[a]=l(h,e,c,parseInt(m.data("width-spacer"),10),parseInt(m.data("height-spacer"),10),c.height[a+f+"panel"],p)}function n(a){var b=o(a,"padding-bottom")+o(a,"padding-top"),c=o(a,"padding-right")+o(a,"padding-left");return{horizontal:c,vertical:b}}function o(a,b){return a&&b?parseInt(a.css(b),10)||0:0}function p(a,c){var d=b(c);if("none"!==d.css("display")){var e=parseInt(d.css("line-height"),10);a.showDescription=!0,a.descriptionHeight=d.height(),a.descriptionHeightLimit=Math.floor(3*e)}}function q(a,b,c,d,e){var f=j(d),h=i(d,f),k=g.getMobileViewDimensions(h,d,b),l=c[a+f+"description"];p(k,l),k.isMobileZoom=e,b.custom[a]=k}var g=e.mediaZoomCalculations,r="wysiwyg.components.imageZoom";c.registerCustomMeasure(r,function(a,b,c,d,e){var f=h(e).id,g=d.isMobileView()?q:m;g(a+f,b,c,d)}),c.registerPatcher(r,function(a,b,c,d,e){var f=h(d).id,g=e.isMobileView()?l:k;g(a+f,b,c,d,e)}),c.registerRequestToMeasureChildren(r,function(a,b,c,d){var e=h(d).id,f=j(a),g={pathArray:[e,f,"image"],type:"core.components.Image"};return a.isMobileView()?[[e],g,[e,"dialogBox"],[e,f,"description"],[e,f,"ellipsis"]]:[[e],g,[e,"dialogBox"],[e,"buttonPrev"],[e,"buttonNext"],[e,f,"panel"]]})}),define("layout/specificComponents/tpaGalleryLayout",["zepto","lodash","layout/util/layout","layout/util/calculateScreenWidthDimensions"],function(a,b,c,d){"use strict";function e(a){return function(b,c,d,e,f){a.forEach(function(a){a(b,c,d,e,f)})}}function f(a,b){b.width[a]=Math.max(10,b.width[a]),b.minHeight[a]=10}function g(b,c,d){a(c[b+"iframe"]).css({width:d.width[b],height:d.height[b]})}function h(a,b,c,e,f){var g=b[a],h=b[a+"iframe"],i=d(c,e,f.rootId);g.style.width=i.width+"px",g.style.left=i.left+"px",c.width[a]=i.width,c.left[a]=i.left,h.setAttribute("style","width: "+i.width+"px")}function i(a,b){var c=.33;b.height[a]=c*b.width[a]}function j(a,b,c,e,f){var g=f.propertiesItem;if(g.fitToScreenWidth){var h=c[a],i=d(b,e,f.rootId);h.style.width=i.width+"px",h.style.left=i.left+"px",b.width[a]=i.width,b.left[a]=i.left}}function k(a,b,c,d,e){"vertical"===e.propertiesItem.orientation&&l(a,b,c)}function l(c,d,e){d.height[c]=b.first(a(e[c]).find("iframe")).offsetHeight}function m(a,b,c,d,e){h(a,b,c,e,d)}c.registerRequestToMeasureChildren("tpa.viewer.components.StripSlideshow",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.StripShowcase",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Collage",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Honeycomb",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Accordion",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Masonry",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Impress",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Freestyle",[["iframe"]]),c.registerRequestToMeasureChildren("tpa.viewer.components.Thumbnails",[["iframe"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DGallery",[["iframe"]]),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DCarousel",[["iframe"]]),c.registerPatcher("tpa.viewer.components.StripShowcase",m),c.registerPatcher("tpa.viewer.components.StripSlideshow",m),c.registerPatcher("tpa.viewer.components.Collage",g),c.registerPatcher("tpa.viewer.components.Accordion",g),c.registerPatcher("tpa.viewer.components.Impress",g),c.registerPatcher("tpa.viewer.components.Freestyle",g),c.registerPatcher("tpa.viewer.components.Thumbnails",g),c.registerPatcher("tpa.viewer.components.Honeycomb",g),c.registerPatcher("tpa.viewer.components.Masonry",g),c.registerPatcher("wysiwyg.viewer.components.tpapps.TPA3DGallery",g),c.registerPatcher("wysiwyg.viewer.components.tpapps.TPA3DCarousel",g),c.registerCustomMeasure("tpa.viewer.components.Collage",e([l,j,f])),c.registerCustomMeasure("tpa.viewer.components.Masonry",e([l,f])),c.registerCustomMeasure("tpa.viewer.components.Honeycomb",f),c.registerCustomMeasure("tpa.viewer.components.Accordion",f),c.registerCustomMeasure("tpa.viewer.components.Impress",f),c.registerCustomMeasure("tpa.viewer.components.Freestyle",e([k,f])),c.registerCustomMeasure("tpa.viewer.components.StripShowcase",f),c.registerCustomMeasure("tpa.viewer.components.StripSlideshow",f),c.registerCustomMeasure("tpa.viewer.components.Thumbnails",f),c.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DGallery",f),c.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DCarousel",e([f,i]))}),define("layout/specificComponents/youTubeSubscribeButtonLayout",["layout/util/layout"],function(a){"use strict";function c(a,c,d,e,f){var g=f.propertiesItem.layout,h=b[g+(e.browser.ie?"IE":"")];c.width[a]=h.width,c.height[a]=h.height}var b={"default":{width:145,height:33},defaultIE:{width:145,height:33},full:{width:212,height:55},fullIE:{width:212,height:67}};return a.registerRequestToMeasureDom("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton"),a.registerCustomMeasure("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",c),{}}),define("layout/specificComponents/wFacebookCommentLayout",["layout/util/layout","zepto"],function(a,b){"use strict";function d(a,d,e,f){var g=b(e[a]).find("iframe")[0],h=f.isMobileView()?c.MOBILE:c.DESKTOP;g&&(d.height[a]=Math.max(d.height[a],g.offsetHeight),d.width[a]=Math.max(d.width[a],h))}var c={DESKTOP:400,MOBILE:280};a.registerCustomMeasure("wysiwyg.viewer.components.WFacebookComment",d)}),define("layout/specificComponents/facebookLikeLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function e(a){var b=a?a.layout:c.layout;b=a&&a.show_faces?b+"_showFaces":b;var e=a?a.action:c.action;return d[b][e]}function f(a,b,c,d,f){var g=e(f.propertiesItem);b.width[a]=g.w,b.height[a]=g.h}function g(b,c,d){var e=d.width[b],f=d.height[b],g=a(c[b]).find("iframe")[0];g&&(a(g).width(e),a(g).height(f))}var c={layout:"box_count",show_faces:"box_count",action:"like"},d={standard:{like:{w:250,h:40},recommend:{w:290,h:40}},standard_showFaces:{like:{w:250,h:85},recommend:{w:290,h:85}},button_count:{like:{w:170,h:20},recommend:{w:137,h:20}},box_count:{like:{w:106,h:65},recommend:{w:125,h:65}},box_count_showFaces:{like:{w:85,h:65},recommend:{w:125,h:65}},button_count_showFaces:{like:{w:137,h:20},recommend:{w:137,h:20}}};return b.registerCustomMeasure("wysiwyg.viewer.components.WFacebookLike",f),b.registerPatcher("wysiwyg.viewer.components.WFacebookLike",g),{};
}),define("layout/specificComponents/formMixinLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){var c=b.height[a+"wrapper"];c&&(b.height[a]=c)}function c(a,c,d){b(a,c,d);var e=180;c.width[a]=Math.max(c.width[a],e),c.minWidth[a]=e,c.minHeight[a]=180}function d(a,b){var c=b.height[a+"wrapper"];c&&(b.height[a]=c)}a.registerCustomMeasure("wysiwyg.viewer.components.ContactForm",c),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.ContactForm",[["wrapper"]]),a.registerRequestToMeasureDom("wysiwyg.common.components.subscribeform.viewer.SubscribeForm"),a.registerRequestToMeasureChildren("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",[["wrapper"]]),a.registerCustomMeasure("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",d)}),define("layout/specificComponents/backOfficeTextLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a].childNodes[0];d&&(b.height[a]=Math.max(b.height[a],d.offsetHeight))}a.registerCustomMeasure("wysiwyg.common.components.backofficetext.viewer.BackOfficeText",b)}),define("layout/specificComponents/vkShareLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a];d&&(b.height[a]=d.offsetHeight,b.width[a]=d.offsetWidth)}a.registerCustomMeasure("wysiwyg.viewer.components.VKShareButton",b),a.registerRequestToMeasureDom("wysiwyg.viewer.components.VKShareButton")}),define("layout/specificComponents/adminLoginLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function d(b,d,e){var f=b+"label",g=a(e[f]);d.width[b]=Math.max(g.offset().width,d.width[b]),d.height[b]=Math.max(c,d.height[b]),d.minWidth[b]=g.offset().width}var c=17;b.registerCustomMeasure("wysiwyg.viewer.components.AdminLoginButton",d),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.AdminLoginButton",[["label"]])}),define("layout/specificComponents/homePageLoginLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(b,c,d){var e=a(d[b+"memberTitle"]),f=a(d[b+"actionTitle"]);c.width[b]=Math.max(e.offset().width,f.offset().width,c.width[b]),c.height[b]=Math.max(e.offset().height+f.offset().height,c.height[b])}b.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.HomePageLogin",c),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.HomePageLogin",[["memberTitle"],["actionTitle"]])}),define("layout/specificComponents/iTunesButtonLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){b.minWidth[a]=110,b.width[a]=Math.min(400,b.width[a]),b.height[a]=40*b.width[a]/110}a.registerCustomMeasure("wysiwyg.viewer.components.ItunesButton",b)}),define("layout/specificComponents/paypalLayout",["layout/util/layout"],function(a){"use strict";return a.registerCustomMeasure("wysiwyg.viewer.components.PayPalButton",function(a,b,c){b.height[a]=c[a+"submitImage"].offsetHeight,b.width[a]=c[a+"submitImage"].offsetWidth}),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PayPalButton",[["submitImage"]]),{}}),define("layout/specificComponents/wixSiteLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function d(){var b=a("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),c=a("<div>").css({width:"100%"}).appendTo(b).width();return b.remove(),100-c}function e(a){return"WixSite"===a.rendererModel.siteInfo.documentType}function f(a){return a.isTabletDevice()&&e(a)}function g(b,c){a(b.body).css({width:c.width.body})}function h(a,b){c=c||d();var e=document.body.clientWidth,f=window.innerWidth,g=e;f>e+c&&(g=f),a.body=document.body,b.width.body=g}function i(a,b,c,d,e){f(e)&&g(b,c)}function j(a,b,c,d){f(d)&&h(c,b)}var c;b.registerCustomMeasure("document",j),b.registerPatcher("document",i)}),define("layout/wixappsLayout/proxyLayout/util/masonryCalculations",["lodash"],function(a){"use strict";var b={getColumnSidePadding:function(a,b,c,d){var e="rtl"===d,f=Math.floor(c/b),g=a*f,h=(b-1-a)*f;return{right:e?g:h,left:e?h:g}},getMasonryRowsAndColumns:function(b,c){for(var d=[],e=[],f=[],g=0;c>g;g++)e.push(0),f.push(0);for(var h=0;h<b.length;h++){var i=a.indexOf(e,a.min(e));d.push({col:i,row:f[i],topOffset:e[i]}),e[i]+=b[h],f[i]++}return d}};return b}),define("layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/util/masonryCalculations"],function(a,b,c,d){"use strict";function e(b){var c=parseInt(a(b).attr("data-columns"),10),d=a(b).attr("data-direction"),e=parseInt(a(b).attr("data-horizontal-gap"),10),f=parseInt(a(b).attr("data-vertical-gap"),10);return{columns:c,direction:d,horizontalGap:e,verticalGap:f}}function f(a){return b.map(a.childNodes,"clientHeight")}function g(a){var c=f(a),g=e(a),h=a.childNodes,i=d.getMasonryRowsAndColumns(c,g.columns),j=Math.floor(a.clientWidth/g.columns),k={domManipulations:[],needsRelayout:!0},l=k.domManipulations,m=[];b.forEach(h,function(a,b){var c=i[b],e=c.row*g.verticalGap+c.topOffset,f=d.getColumnSidePadding(c.col,g.columns,g.horizontalGap,g.direction),h=c.col*j;m.push(e);var k={position:"absolute",top:e+"px","padding-right":f.right+"px","padding-left":f.left+"px"};"rtl"===g.direction?k.right=h+"px":k.left=h+"px",l[b]={node:a,funcName:"css",params:k}});var n=b(h).map(function(a,b){return m[b]+c[b]}).max();return l.push({node:a,funcName:"css",params:{height:n+"px"}}),k}c.registerCustomMeasure("PaginatedColumnGalleryProxy",g)}),define("layout/wixappsLayout/proxyLayout/galleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b,c){"use strict";function d(c,d,e){var f=c.id+"itemsContainer",g=a("#"+f),h=a(c),i=Number(h.attr("data-total-columns")),j=Number(h.attr("data-total-rows")),k=Number(h.attr("data-gap")),l=[],m=g.children();if(m.length){var n=m[0],o=n.getBoundingClientRect(),p=o.width,q=o.height;l=b.map(m,function(b){var c=parseInt(a(b).attr("data-index"),10),d=Math.floor(c/i)%j,e=d*k,f=c%i,g=f*k;return{node:b,funcName:"css",params:{top:d*q+e,left:f*p+g}}})}return e.height[f]=g.height(),e.width[f]=g.width(),e.height[c.id]=h.height(),e.width[c.id]=h.width(),{domManipulations:l}}c.registerCustomMeasure("GalleryProxy",d)}),define("layout/wixappsLayout/proxyLayout/imageProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b,c){"use strict";function d(b,c,d){var e=a(b),f=b.firstChild,g=f.id,h={width:parseInt(e.attr("data-width"),10),height:parseInt(e.attr("data-height"),10),uri:e.attr("data-uri"),quality:c.getGlobalImageQuality()},i={displayMode:e.attr("data-display-mode")};return d.width[g]=b.offsetWidth,d.height[g]=b.offsetHeight,d.custom[g]={thisIsMyHeight:d.height[g]},{comp:{compType:"wysiwyg.viewer.components.WPhoto",compId:g,structureInfo:{dataItem:h,propertiesItem:i,layout:null,styleItem:null}},domManipulations:[]}}c.registerCustomMeasure("Image",d)}),define("layout/wixappsLayout/proxyLayout/buttonProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(a){"use strict";function b(a,b,c){var d=a.id;return c.width[d]=a.offsetWidth,c.height[d]=a.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SiteButton",compId:d,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}}a.registerCustomMeasure("Button",b),a.registerCustomMeasure("Button2",b)}),define("layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(a){"use strict";a.registerCustomMeasure("MediaLabel",function(a,b,c){var d=a.id;return c.width[d]=a.offsetWidth,c.height[d]=a.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.MediaRichText",compId:d,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}})}),define("layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout",["zepto","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b){"use strict";function c(b,c,d){var e=a(b),f=b.firstChild,g=f.id,h={aspectRatio:e.attr("data-aspect-ratio"),imageMode:e.attr("data-image-mode")};return d.width[g]=b.offsetWidth,d.height[g]=b.offsetHeight,{comp:{compType:"wysiwyg.viewer.components.SliderGallery",compId:g,structureInfo:{dataItem:null,propertiesItem:h,layout:null,styleItem:null}},domManipulations:[]}}b.registerCustomMeasure("SliderGallery",c)}),define("layout/specificComponents/imageButtonLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/imageLayout","imageClientApi"],function(a,b,c,d,e){"use strict";function g(a,b){return{width:b.width[a],height:b.height[a]}}function h(b,c,f,g,h,i,j){var k=h.dataItem[b];if(k){var l=c+b,m=a.defaults({displayMode:e.fittingTypes.LEGACY_FULL},k);d.patchNodeImage(l,f,g,i,m,j)}}function i(c,d,e,i,j){var k=g(c,e);a.forEach(f,function(a){h(a,c,d,e,i,j,k)});var l=c+"link",m=b(d[l]);m.css({width:k.width,height:k.height})}function j(){var b=a.map(f,function(a){return{pathArray:[a],type:"core.components.Image"}});return b.push(["link"]),b}var f=["defaultImage","hoverImage","activeImage"];c.registerRequestToMeasureDom("wysiwyg.common.components.imagebutton.viewer.ImageButton"),c.registerRequestToMeasureChildren("wysiwyg.common.components.imagebutton.viewer.ImageButton",j()),c.registerPatcher("wysiwyg.common.components.imagebutton.viewer.ImageButton",i)}),define("layout/specificComponents/mediaRichTextLayout",["layout/util/layout","zepto"],function(a,b){"use strict";a.registerRequestToMeasureDom("wysiwyg.viewer.components.MediaRichText"),a.registerPatcher("wysiwyg.viewer.components.MediaRichText",function(a,c,d){var e=b(c[a]),f=e.attr("data-width"),g=parseInt(d.width[a],10);return f&&parseInt(f,10)===g?(e.css({height:""}),!1):(e.attr("data-width",g),!0)})}),define("layout/specificComponents/backToTopButtonLayout",["layout/util/layout","zepto"],function(a,b){"use strict";function c(a,b,c){b.custom[a+"siteStructureBoundingClientRect"]=c.SITE_STRUCTURE.getBoundingClientRect()}function d(a,c,d){var e=b(c[a]).find("div")[0];b(e).css({right:d.custom[a+"siteStructureBoundingClientRect"].left})}a.registerCustomMeasure("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",c),a.registerPatcher("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",d)}),define("layout/specificComponents/appPartZoomLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/wixappsLayout"],function(a,b,c,d){"use strict";function e(a){return a.appPartName?a.id:a.dataItemRef.id}function f(a,b){var c=b.id,d=e(b);return a+c+d}function g(a,c,d){var e=a+"inlineContent",f=b(c[e]),g=Math.max(d.height[a],d.height.screen);f.css({height:g})}function h(a,c,d,e){var f=b(d[a]),g=Math.max(e.height[c],e.height.screen);f.css({height:g})}function i(b,c){var d=a.has(b,"dataItemRef")?b.dataItemRef.appInnerID:b.appInnerID;return!!c.getClientSpecMapEntry(d)}c.registerRequestToMeasureChildren("wixapps.integration.components.AppPartZoom",function(a,b,c,f){if(!i(f.dataItem,a))return null;var g=e(f.dataItem),h=f.dataItem.id;return[[h,g],[h,g,d.inlineContentId]]}),c.registerCustomMeasure("wixapps.integration.components.AppPartZoom",function(a,b,c,e,g){if(!i(g.dataItem,e))return null;var h=f(a,g.dataItem);d.appPartMeasureFunction(h,b,c,e),b.custom[a]={marginTop:Math.max((b.height.screen-b.height[h])/2,0),height:b.height[h]}}),c.registerPatcher("wixapps.integration.components.AppPartZoom",function(a,b,c,e,j){if(i(e.dataItem,j)){var k=f(a,e.dataItem);j.isMobileView()?(h(a,k,b,c),g(k,b,c)):d.appPartPatcherFunction(k,b,c,null,j)}}),c.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPartZoom",function(a,c,e,g,h){if(!i(a.dataItem,h))return null;var j=f(a.id,a.dataItem),k={id:j},l=b("#"+j)[0];return d.preMeasureProxies(k,l,e,g,h)},function(a,b,c,e){if(!i(a.dataItem,e))return null;var g=f(a.id,a.dataItem),h={id:g};return d.postPatchProxies(h,b,c,e)})}),define("layout/specificComponents/facebookShareLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a].children[0];d&&(b.height[a]=Math.max(b.height[a],d.offsetHeight),b.width[a]=Math.max(b.width[a],d.offsetWidth))}a.registerCustomMeasure("wysiwyg.viewer.components.FacebookShare",b),a.registerRequestToMeasureDom("wysiwyg.viewer.components.FacebookShare")}),define("layout/specificComponents/paginatedGridGalleryLayout",["layout/util/layout","zepto","lodash","utils","imageClientApi","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f){"use strict";function h(a,d,h,i,j,k,l,m,n){c.forEach(a,function(a,o){var p=g.getItemPosition(o,d,h,i.margin,i.numCols);b(a).css({width:d,height:h,left:p.left,top:p.top});var q=b(a).attr("data-image-index"),r=c.assign({},n.dataItem.items[q],{displayMode:e.fittingTypes.SCALE_TO_FILL});f.patchNodeImage(m+b(a)[0].id,k,l,j,r,{width:d,height:h})})}function i(a,d){var e=[["itemsContainer"]],f=b("#"+d+"itemsContainer").children();return c.forEach(f,function(a){e.push({pathArray:[a.id],type:"core.components.Image"})}),e}var g=d.matrixCalculations;return a.registerPatcher("wysiwyg.viewer.components.PaginatedGridGallery",function(a,c,d,e,f){var i=d.height[a],j=d.width[a],k=parseInt(b(c[a]).attr("data-height-diff"),10),l=parseInt(b(c[a]).attr("data-width-diff"),10),m=c[a+"itemsContainer"],n=e.propertiesItem;b(m).css({width:j-l,height:i-k});var o=g.getItemWidth(n.margin,n.numCols,j,l),p=g.getAvailableRowsNumber(n.maxRows,n.numCols,e.dataItem.items.length),q=g.getItemHeight(n.margin,i,p,k);h(b(m).children('div[data-page-desc="next"]'),o,q,n,f,c,d,a,e),h(b(m).children('div[data-page-desc="prev"]'),o,q,n,f,c,d,a,e),h(b(m).children('div[data-page-desc="curr"]'),o,q,n,f,c,d,a,e)}),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",i),{}}),define("layout/specificComponents/PinterestFollowLayout",["layout/util/layout"],function(a){"use strict";return a.registerCustomMeasure("wysiwyg.viewer.components.PinterestFollow",function(a,b,c){b.height[a]=c[a+"followButtonTag"].offsetHeight,b.width[a]=c[a+"followButtonTag"].offsetWidth}),a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PinterestFollow",[["followButtonTag"]]),{}}),define("layout/specificComponents/videoLayout",["layout/util/layout"],function(a){"use strict";function d(a,d,e,f,g){var h=b[g.dataItem.videoType]||c;d.minWidth[a]=h.WIDTH,d.minHeight[a]=h.HEIGHT,d.width[a]=Math.max(d.width[a],h.WIDTH),d.height[a]=Math.max(d.height[a],h.HEIGHT)}var b={VIMEO:{WIDTH:100,HEIGHT:100},YOUTUBE:{WIDTH:200,HEIGHT:200}},c={WIDTH:10,HEIGHT:10};a.registerCustomMeasure("wysiwyg.viewer.components.Video",d)}),define("layout/specificComponents/soundCloudLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){var c=250,d=50;b.minWidth[a]=c,b.minHeight[a]=d,b.width[a]=Math.max(b.width[a],c),b.height[a]=Math.max(b.height[a],d)}a.registerCustomMeasure("wysiwyg.viewer.components.SoundCloudWidget",b)}),define("layout/specificComponents/verticalLineLayout",["layout/util/layout"],function(a){"use strict";var b=2e3;a.registerCustomMeasure("wysiwyg.viewer.components.VerticalLine",function(a,c){c.height[a]=Math.min(c.height[a],b)})}),define("layout/specificComponents/boxSlideShowLayout",["zepto","utils","layout/util/layout","layout/specificComponents/balataLayout","experiment"],function(a,b,c,d,e){"use strict";function h(a,b){b.height[a]=Math.max(f,b.height[a]),b.minHeight[a]=f}function i(b,c,f,h,i){c.top[b]=0,c.left[b]=0;var j=a(f[b]),k=j.attr("data-parent-id");if(c.minHeight[b]=c.height[k],e.isOpen("balata")&&e.isOpen("designData")){if(!i.designDataItem.background)return;var l=b+g.BALATA;c.width[l]=c.width[b],c.height[l]=c.height[b],c.left[l]=c.left[b];var m=f[b].getBoundingClientRect();c.custom[b]={absoluteLeft:m.left},d.measure(b,c,f,h,i)}}function j(a,b,c,f,g){if(f.designDataItem.background&&e.isOpen("balata")&&e.isOpen("designData")){var h={top:c.top[a],left:c.left[a],width:c.width[a],height:c.height[a],absoluteLeft:c.custom[a].absoluteLeft};d.patch(a,b,c,f,g,h)}}var f=50,g=b.balataConsts;c.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShow",h),c.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShowSlide",i),e.isOpen("balata")&&e.isOpen("designData")&&(c.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShow"),c.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShowSlide"),c.registerRequestToMeasureChildren("wysiwyg.viewer.components.BoxSlideShowSlide",[["inlineContentParent"],["inlineContent"],[g.BALATA]]),c.registerPatcher("wysiwyg.viewer.components.BoxSlideShowSlide",j))}),define("layout/specificComponents/mediaContainerLayout",["lodash","utils","layout/util/layout","layout/specificComponents/balataLayout","experiment"],function(a,b,c,d,e){"use strict";function h(a,b,c,f,g){if(e.isOpen("balata")&&e.isOpen("designData")){if(!g.designDataItem.background)return;d.measure(a,b,c,f,g),b.absoluteLeft[a]=c[a].getBoundingClientRect().left}}function i(a,b,c,f,g){if(f.designDataItem.background&&e.isOpen("balata")&&e.isOpen("designData")){var h={top:0,left:0,width:c.width[a],height:c.height[a],absoluteLeft:c.absoluteLeft[a]};d.patch(a,b,c,f,g,h)}}var f=b.balataConsts,g=["wysiwyg.viewer.components.HoverBox"];e.isOpen("balata")&&e.isOpen("designData")&&a.forEach(g,function(a){c.registerCustomMeasure(a,h),c.registerRequestToMeasureChildren(a,[[f.BALATA]]),c.registerPatcher(a,i)})}),define("layout/specificComponents/verticalAnchorsMenuLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(c,d,e){var f=a(e[c]),g=f.find("[class*=link]"),h=f.find("[class*=label]"),i=f.find("[class*=symbol]"),j=g.length,k=i.width(),l=Math.ceil(g.height()*j),m=0;b.forEach(h,function(b){m=Math.max(m,a(b).width())});var n=m+k;d.width[c]=Math.max(d.width[c],n),d.height[c]=Math.max(d.height[c],l),d.custom[c]={minHeight:l,minWidth:n}}function e(b,c,d){var e=a(c[b]);e.width(d.width[b]),e.height(d.height[b])}c.registerCustomMeasure("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",d),c.registerPatcher("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",e)}),define("layout/specificComponents/columnsLayout",["lodash","zepto","utils","layout/util/layout","layout/specificComponents/balataLayout"],function(a,b,c,d,e){"use strict";function g(a,b,c,d,e,f,g){var h=a.structure,i=h.id;f(h),c.minHeight[i]=0,g(h),e.isMobileView()&&(c.top[i]=d[i].offsetTop)}function h(b,d,g,h,i){var j=h.isMobileView(),k=c.dataUtils.getChildrenData(i.structure,j),l=a.map(k,"id");if(j){var m=2*i.propertiesItem.rowMargin+(k.length-1)*i.propertiesItem.columnsMargin;a.forEach(l,function(a,c){m+=d.height[a],d.minHeight[a]=d.height[a];var e=c===l.length-1;e?d.injectedAnchors[a]=[{distance:i.propertiesItem.rowMargin,topToTop:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:b}]:d.injectedAnchors[a]=[{distance:i.propertiesItem.columnsMargin,locked:!0,originalValue:0,targetComponent:l[c+1],topToTop:0,type:"BOTTOM_TOP"}]}),d.height[b]=m,d.height[b+f.BALATA]=m}else{var n=a(l).map(a.get.bind(a,d.height)).max();a.forEach(l,function(a){d.top[a]=i.propertiesItem.rowMargin,d.minHeight[a]=n,d.injectedAnchors[a]=[{distance:0,originalValue:0,type:"BOTTOM_PARENT",locked:!0,targetComponent:b}]}),d.height[b]=n+2*i.propertiesItem.rowMargin,d.containerHeightMargin[b]=i.propertiesItem.rowMargin,d.height[b+f.BALATA]=n+2*i.propertiesItem.rowMargin}e.measure(b,d,g,h,i);var o=g[b].getBoundingClientRect(),p=g[b+f.BALATA].offsetLeft;d.custom[b]={absoluteLeft:o.left+p,backgroundLeft:g[b+f.BALATA].offsetLeft,backgroundWidth:g[b+f.BALATA].offsetWidth}}function i(a,c,d,f,g){b(c[a]).css({height:d.height[a],left:0});var h={top:0,left:d.custom[a].backgroundLeft,width:d.custom[a].backgroundWidth,height:d.height[a],absoluteLeft:d.custom[a].absoluteLeft};e.patch(a,c,d,f,g,h)}function j(a,b,c,d,g){b.height[a+f.BALATA]=b.minHeight[a],e.measure(a,b,c,d,g);var h=c[a].getBoundingClientRect(),i=c[a+f.BALATA].offsetLeft;b.custom[a]={absoluteLeft:h.left+i,backgroundLeft:c[a+f.BALATA].offsetLeft,backgroundWidth:c[a+f.BALATA].offsetWidth}}function k(a,c,d,f,g){b(c[a]).css({height:d.height[a]});var h={top:0,left:d.custom[a].backgroundLeft,width:d.custom[a].backgroundWidth,height:d.height[a],absoluteLeft:d.custom[a].absoluteLeft};e.patch(a,c,d,f,g,h)}var f=c.balataConsts;d.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripColumnsContainer",[[f.BALATA]]),d.registerRequestToMeasureChildren("wysiwyg.viewer.components.Column",[[f.BALATA]]),d.registerLayoutInnerCompsFirst("wysiwyg.viewer.components.Column",g,a.noop),d.registerCustomMeasure("wysiwyg.viewer.components.StripColumnsContainer",h),d.registerPatcher("wysiwyg.viewer.components.StripColumnsContainer",i),d.registerCustomMeasure("wysiwyg.viewer.components.Column",j),d.registerPatcher("wysiwyg.viewer.components.Column",k)}),define("layout/util/popupContainerDocking",["zepto","utils","layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/balataLayout","layout/util/rootLayoutUtils"],function(a,b,c,d,e){"use strict";function j(a,b,c){var d=e.getLayerWidth(b,a,c),f=e.getRootWidth(b,a,c);return Math.max(0,(d-f)/2)}function k(a,b,c,d){return j(a,b,d)-c}function l(a,b,c,d){var f=e.getLayerWidth(c,b,d),g=Math.min(f,c.getSiteWidth());return g-b.width[a]}function m(a,b,c){var d=c.getPageBottomMargin();return Math.max(b.height.screen-b.height[a]-d,0)}function n(a,b,c,d,e,f){return a===g.CENTER?l(b,c,d,f)/2+e:a===g.RIGHT?k(c,d,e,f)+l(b,c,d,f):-k(c,d,e,f)}function o(a,b){return{top:0,left:0,width:a.width[b],height:a.height[b],absoluteLeft:0}}var f={TOP:"top",CENTER:"center",BOTTOM:"bottom"},g={LEFT:"left",CENTER:"center",RIGHT:"right"},h={NINE_GRID:"nineGrid",FULL_HEIGHT:"fullHeight",FULL_WIDTH:"fullWidth"},i=b.balataConsts;return{measure:function(a,e,f,g,i){var j=i.propertiesItem,k=j.horizontalAlignment,l={};if(j.alignmentType===h.FULL_WIDTH)return void c.measureStripContainer(a,e,f,g,i);if(j.alignmentType===h.FULL_HEIGHT){var m=b.layout.getContainerBottomChildEnd(e,f,g,i),o=Math.max(e.height.screen,m);e.minHeight[a]=o,e.height[a]=o}l.width=e.width[a],e.left[a]=n(k,a,e,g,j.horizontalOffset,i.rootId),d.measure(a,e,f,g,i,l)},patch:function(b,e,g,j,k){var l,p,n=j.propertiesItem,q=k.getCurrentPopupId();l=n.verticalAlignment===f.CENTER?m(b,g,k)/2+n.verticalOffset:n.verticalAlignment===f.BOTTOM?m(b,g,k)-n.verticalOffset:n.verticalOffset,g.top[b]=l,p=g.height[q]=l+g.height[b],a(e[q]).height(p),a(e[b]).css({left:g.left[b],top:l,width:g.width[b],height:g.height[b]});var r=o(g,b);n.alignmentType===h.FULL_WIDTH?c.patchStripContainer(b,e,g,j,k,r):(g.height[b+i.BALATA]=g.height[b],d.patch(b,e,g,j,k,r))}}}),define("layout/specificComponents/popupContainerLayout",["lodash","layout/util/layout","utils","layout/util/popupContainerDocking","layout/specificComponents/containerAndScreenWidthLayout"],function(a,b,c,d,e){"use strict";function g(a,b,c,f,g){e.measureContainer(a,b,c,f,g),d.measure(a,b,c,f,g);var h=g.propertiesItem;b.width["ROOT_"+g.rootId]="fullWidth"===h.alignmentType?f.getSiteWidth():b.width[a],b.left["ROOT_"+g.rootId]=Math.floor(b.left[a]-f.getSiteX())}function h(a,b,c,e,f){d.patch(a,b,c,e,f)}var f=c.balataConsts;b.registerMeasureChildrenFirst("wysiwyg.viewer.components.PopupContainer",!0),b.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupContainer",[["inlineContent"],[f.BALATA]]),b.registerRequestToMeasureDom("wysiwyg.viewer.components.PopupContainer"),b.registerCustomMeasure("wysiwyg.viewer.components.PopupContainer",g),b.registerPatcher("wysiwyg.viewer.components.PopupContainer",h)}),define("layout",["layout/util/layout","layout/specificComponents/wixHomepageMenuLayout","layout/specificComponents/fiveGridLineLayout","layout/specificComponents/domainSearchLayout","layout/specificComponents/registerToMeasureOnly","layout/specificComponents/registerToPureDomMeasure","layout/specificComponents/PinItPinWidgetLayout","layout/specificComponents/areaTooltipLayout","layout/specificComponents/menuLayout","layout/specificComponents/sliderGalleryLayout","layout/specificComponents/verticalMenuLayout","layout/specificComponents/loginButtonLayout","layout/specificComponents/dialogLayout","layout/specificComponents/siteBackgroundLayout","layout/specificComponents/buttonLayout","layout/specificComponents/photoLayout","layout/specificComponents/documentMediaLayout","layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/groupLayout","layout/specificComponents/wixappsLayout","layout/specificComponents/shapeLayout","layout/specificComponents/richtextLayout","layout/specificComponents/matrixGalleryLayout","layout/specificComponents/slideShowLayout","layout/specificComponents/anchorLayout","layout/specificComponents/tinyMenuLayout","layout/specificComponents/imageZoomLayout","layout/specificComponents/tpaGalleryLayout","layout/specificComponents/youTubeSubscribeButtonLayout","layout/specificComponents/wFacebookCommentLayout","layout/specificComponents/facebookLikeLayout","layout/specificComponents/formMixinLayout","layout/specificComponents/backOfficeTextLayout","layout/specificComponents/vkShareLayout","layout/specificComponents/adminLoginLayout","layout/specificComponents/homePageLoginLayout","layout/specificComponents/iTunesButtonLayout","layout/specificComponents/paypalLayout","layout/specificComponents/bgImageLayout","layout/specificComponents/wixSiteLayout","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout","layout/wixappsLayout/proxyLayout/galleryProxyLayout","layout/wixappsLayout/proxyLayout/imageProxyLayout","layout/wixappsLayout/proxyLayout/buttonProxyLayout","layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout","layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout","layout/specificComponents/imageButtonLayout","layout/specificComponents/mediaRichTextLayout","layout/specificComponents/backToTopButtonLayout","layout/specificComponents/appPartZoomLayout","layout/specificComponents/facebookShareLayout","layout/specificComponents/paginatedGridGalleryLayout","layout/specificComponents/PinterestFollowLayout","layout/specificComponents/videoLayout","layout/specificComponents/soundCloudLayout","layout/specificComponents/verticalLineLayout","layout/specificComponents/boxSlideShowLayout","layout/specificComponents/mediaContainerLayout","layout/specificComponents/verticalAnchorsMenuLayout","layout/specificComponents/columnsLayout","layout/specificComponents/popupContainerLayout"],function(a){"use strict";return a});